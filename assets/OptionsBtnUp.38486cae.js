import{a as R,g as _}from"./useMitt.81ca58b0.js";import $ from"./PopSaveScheme.0b1164c2.js";import k from"./PopSchemeList.898676ad.js";import{b as I,c as B,e as L}from"./controller.api.50e8f0e1.js";import{j as M,o as T,C as i,bj as S,E as N,ds as d,cG as Y,q as A,r as b,s as E,t as U,aW as o,N as O,O as g,v as j,dm as q,dn as z}from"./index.d6323a8b.js";const H=M({name:"OptionsBtnUp",components:{PopSaveScheme:$,PopSchemeList:k},directives:{focus:{mounted:e=>e.querySelector("input").focus()}},setup(){const{t:e}=T(),t=i(),f=i(),v=i(!1),m=i(!1),c=i(!1),l=S("changeDeviceObj",{}),p=i();R(s=>{p.value=s});const a=i(),D=S("changeDevicePlanDetail",{});N(D,s=>{a.value=s.id,m.value=s.isRun});const C="YYYY-MM-DD HH:mm",w=()=>{c.value=!0;const s=p.value;let n="";s[0]&&s[0].btnType=="reservation"&&(n=s[0].date),n||(n=Y(new Date().getTime()+6e4).format(C));const P={deviceId:l.value.id,settings:JSON.stringify(s),startTime:n,isRun:!1};I(P).then(()=>{d.success(e("device.tips.success")),c.value=!1,_()}).catch(()=>{c.value=!1})},h=s=>{a.value||d.warning(e("device.tips.pleaseSave"));const n={id:a.value};(s?B:L)(n).then(()=>{s?d.success(e("device.tips.startSuccess")):d.success(e("device.tips.stopSuccess")),_()})};return{isShowStandard:v,isRun:m,popSaveSchemeRef:t,popSchemeListRef:f,submitLoading:c,choseOption:s=>{var n,u;if((n=l.value)!=null&&n.id)s=="save"?w():s=="saveTemplate"?t.value.showModal(p.value):s=="scheme"?f.value.showModal((u=l.value)==null?void 0:u.id):s=="standard"?v.value=!0:s=="start"?h(!0):s=="stop"&&h(!1);else return d.warning(e("device.tips.pleaseChoseDevice"))},blurStandard:()=>{v.value=!1}}}});const r=e=>(q("data-v-2abc58ef"),e=e(),z(),e),V={class:"option-box"},y=r(()=>o("i",{class:"iconfont icon-save"},null,-1)),F=[y],G=r(()=>o("i",{class:"iconfont icon-jiajianzujianjiahao"},null,-1)),J=[G],W=r(()=>o("i",{class:"iconfont icon-zanting"},null,-1)),x=[W],K=r(()=>o("i",{class:"iconfont icon-start"},null,-1)),Q=[K],X=r(()=>o("i",{class:"iconfont icon-wj-fa"},null,-1)),Z=[X];function ee(e,t,f,v,m,c){const l=b("PopSaveScheme"),p=b("PopSchemeList");return E(),U("div",V,[o("div",{class:"option-item scale-btn",onClick:t[0]||(t[0]=a=>e.choseOption("save"))},F),o("div",{class:"option-item scale-btn",onClick:t[1]||(t[1]=a=>e.choseOption("saveTemplate"))},J),O(o("div",{class:"option-item scale-btn",onClick:t[2]||(t[2]=a=>e.choseOption("stop"))},x,512),[[g,e.isRun]]),O(o("div",{class:"option-item scale-btn",onClick:t[3]||(t[3]=a=>e.choseOption("start"))},Q,512),[[g,!e.isRun]]),o("div",{class:"option-item scale-btn",onClick:t[4]||(t[4]=a=>e.choseOption("scheme"))},Z),j(l,{ref:"popSaveSchemeRef"},null,512),j(p,{ref:"popSchemeListRef"},null,512)])}const pe=A(H,[["render",ee],["__scopeId","data-v-2abc58ef"]]);export{pe as default};
