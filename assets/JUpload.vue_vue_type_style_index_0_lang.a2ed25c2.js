var xt=Object.defineProperty;var ze=Object.getOwnPropertySymbols;var Ot=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable;var Ve=(t,e,i)=>e in t?xt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Te=(t,e)=>{for(var i in e||(e={}))Ot.call(e,i)&&Ve(t,i,e[i]);if(ze)for(var i of ze(e))St.call(e,i)&&Ve(t,i,e[i]);return t};import{ce as _t,cf as Lt,C as k,a7 as fe,_ as p,X as $e,cg as Be,bl as it,ch as It,bo as q,bB as Mt,bj as kt,m as g,j as Q,bq as Re,ci as ot,cj as we,E as J,a9 as lt,ck as Nt,v as s,ax as xe,cl as At,cm as ve,cn as ue,ag as st,co as $t,cp as Rt,cq as ut,cr as Ge,cs as Dt,ct as Et,av as Oe,aJ as ct,az as vt,aA as ft,bn as dt,cu as We,d as Ft,cv as jt,aN as z,l as mt,aR as Ut,H as O,y as zt,cw as Vt,cx as Tt,s as pe,t as ye,N as Xe,O as Ze,aW as ie,I as he,u as gt,bv as Bt,n as Gt,r as Ye,w as He,z as qe,R as Je,Q as Wt,x as Xt,B as Zt,M as Yt,cy as Ht,a as ke}from"./index.d6323a8b.js";import{c as qt}from"./api.47fd90c6.js";var Jt="[object Number]";function Qt(t){return typeof t=="number"||_t(t)&&Lt(t)==Jt}function Kt(t){var e=k(null),i=fe(p({},t)),a=k([]),r=function(C){e.value===null&&(a.value=[],e.value=Be(function(){var b;a.value.forEach(function(_){b=p(p({},b),_)}),it(i,b),e.value=null})),a.value.push(C)};return $e(function(){e.value&&Be.cancel(e.value)}),[i,r]}function Qe(t,e,i,a){var r=e+i,c=(i-a)/2;if(i>a){if(e>0)return q({},t,c);if(e<0&&r<a)return q({},t,-c)}else if(e<0||r>a)return q({},t,e<0?c:-c);return{}}function en(t,e,i,a){var r=It(),c=r.width,C=r.height,b=null;return t<=c&&e<=C?b={x:0,y:0}:(t>c||e>C)&&(b=p(p({},Qe("x",i,t,c)),Qe("y",a,e,C))),b}var Ke=Symbol("previewGroupContext"),De={provide:function(e){Mt(Ke,e)},inject:function(){return kt(Ke,{isPreviewGroup:k(!1),previewUrls:g(function(){return new Map}),setPreviewUrls:function(){},current:k(null),setCurrent:function(){},setShowPreview:function(){},setMousePosition:function(){},registerImage:null,rootClassName:""})}},tn=Q({compatConfig:{MODE:3},name:"PreviewGroup",inheritAttrs:!1,props:{previewPrefixCls:String,preview:{type:[Boolean,Object],default:!0},icons:{type:Object,default:function(){return{}}}},setup:function(e,i){var a=i.slots,r=g(function(){var P={visible:void 0,onVisibleChange:function(){},getContainer:void 0,current:0};return Re(e.preview)==="object"?Ct(e.preview,P):P}),c=fe(new Map),C=k(),b=g(function(){return r.value.visible}),_=g(function(){return r.value.getContainer}),u=function(h,A){var N,o;(N=(o=r.value).onVisibleChange)===null||N===void 0||N.call(o,h,A)},m=ot(!!b.value,{value:b,onChange:u}),f=we(m,2),S=f[0],v=f[1],L=k(null),V=g(function(){return b.value!==void 0}),G=g(function(){return Array.from(c.keys())}),I=g(function(){return G.value[r.value.current]}),$=g(function(){return new Map(Array.from(c).filter(function(P){var h=we(P,2),A=h[1].canPreview;return!!A}).map(function(P){var h=we(P,2),A=h[0],N=h[1].url;return[A,N]}))}),E=function(h,A){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;c.set(h,{url:A,canPreview:N})},j=function(h){C.value=h},R=function(h){L.value=h},D=function(h,A){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=function(){c.delete(h)};return c.set(h,{url:A,canPreview:N}),o},U=function(h){h==null||h.stopPropagation(),v(!1),R(null)};return J(I,function(P){j(P)},{immediate:!0,flush:"post"}),lt(function(){S.value&&V.value&&j(I.value)},{flush:"post"}),De.provide({isPreviewGroup:k(!0),previewUrls:$,setPreviewUrls:E,current:C,setCurrent:j,setShowPreview:v,setMousePosition:R,registerImage:D}),function(){var P=it({},(Nt(r.value),r.value));return s(xe,null,[a.default&&a.default(),s(wt,p(p({},P),{},{"ria-hidden":!S.value,visible:S.value,prefixCls:e.previewPrefixCls,onClose:U,mousePosition:L.value,src:$.value.get(C.value),icons:e.icons,getContainer:_.value}),null)])}}});const pt=tn;var ae={x:0,y:0},nn=p(p({},At()),{},{src:String,alt:String,rootClassName:String,icons:{type:Object,default:function(){return{}}}}),rn=Q({compatConfig:{MODE:3},name:"Preview",inheritAttrs:!1,props:nn,emits:["close","afterClose"],setup:function(e,i){var a=i.emit,r=i.attrs,c=fe(e.icons),C=c.rotateLeft,b=c.rotateRight,_=c.zoomIn,u=c.zoomOut,m=c.close,f=c.left,S=c.right,v=k(1),L=k(0),V=Kt(ae),G=we(V,2),I=G[0],$=G[1],E=function(){return a("close")},j=k(),R=fe({originX:0,originY:0,deltaX:0,deltaY:0}),D=k(!1),U=De.inject(),P=U.previewUrls,h=U.current,A=U.isPreviewGroup,N=U.setCurrent,o=g(function(){return P.value.size}),n=g(function(){return Array.from(P.value.keys())}),l=g(function(){return n.value.indexOf(h.value)}),d=g(function(){return A.value?P.value.get(h.value):e.src}),M=g(function(){return A.value&&o.value>1}),T=k({wheelDirection:0}),ee=function(){v.value=1,L.value=0,$(ae),a("afterClose")},te=function(){v.value++,$(ae)},de=function(){v.value>1&&v.value--,$(ae)},x=function(){L.value+=90},F=function(){L.value-=90},X=function(w){w.preventDefault(),w.stopPropagation(),l.value>0&&N(n.value[l.value-1])},Z=function(w){w.preventDefault(),w.stopPropagation(),l.value<o.value-1&&N(n.value[l.value+1])},Y=ve(q({},"".concat(e.prefixCls,"-moving"),D.value)),Se="".concat(e.prefixCls,"-operations-operation"),Ce="".concat(e.prefixCls,"-operations-icon"),_e=[{icon:m,onClick:E,type:"close"},{icon:_,onClick:te,type:"zoomIn"},{icon:u,onClick:de,type:"zoomOut",disabled:g(function(){return v.value===1})},{icon:b,onClick:x,type:"rotateRight"},{icon:C,onClick:F,type:"rotateLeft"}],me=function(){if(e.visible&&D.value){var w=j.value.offsetWidth*v.value,W=j.value.offsetHeight*v.value,ne=ut(j.value),H=ne.left,re=ne.top,K=L.value%180!==0;D.value=!1;var le=en(K?W:w,K?w:W,H,re);le&&$(p({},le))}},Le=function(w){w.button===0&&(w.preventDefault(),w.stopPropagation(),R.deltaX=w.pageX-I.x,R.deltaY=w.pageY-I.y,R.originX=I.x,R.originY=I.y,D.value=!0)},be=function(w){e.visible&&D.value&&$({x:w.pageX-R.deltaX,y:w.pageY-R.deltaY})},Pe=function(w){if(!!e.visible){w.preventDefault();var W=w.deltaY;T.value={wheelDirection:W}}},Ie=function(w){!e.visible||!M.value||(w.preventDefault(),w.keyCode===Ge.LEFT?l.value>0&&N(n.value[l.value-1]):w.keyCode===Ge.RIGHT&&l.value<o.value-1&&N(n.value[l.value+1]))},Me=function(){e.visible&&(v.value!==1&&(v.value=1),(I.x!==ae.x||I.y!==ae.y)&&$(ae))},ge=function(){};return $e(function(){J([function(){return e.visible},D],function(){ge();var y,w,W=ue(window,"mouseup",me,!1),ne=ue(window,"mousemove",be,!1),H=ue(window,"wheel",Pe,{passive:!1}),re=ue(window,"keydown",Ie,!1);try{window.top!==window.self&&(y=ue(window.top,"mouseup",me,!1),w=ue(window.top,"mousemove",be,!1))}catch(K){}ge=function(){W.remove(),ne.remove(),H.remove(),re.remove(),y&&y.remove(),w&&w.remove()}},{flush:"post",immediate:!0}),J([T],function(){var y=T.value.wheelDirection;y>0?de():y<0&&te()})}),st(function(){ge()}),function(){var y=e.visible,w=e.prefixCls,W=e.rootClassName;return s(Rt,p(p({},r),{},{transitionName:"zoom",maskTransitionName:"fade",closable:!1,keyboard:!0,prefixCls:w,onClose:E,afterClose:ee,visible:y,wrapClassName:Y,rootClassName:W,getContainer:e.getContainer}),{default:function(){return[s("ul",{class:"".concat(e.prefixCls,"-operations")},[_e.map(function(H){var re=H.icon,K=H.onClick,le=H.type,se=H.disabled;return s("li",{class:ve(Se,q({},"".concat(e.prefixCls,"-operations-operation-disabled"),se&&(se==null?void 0:se.value))),onClick:K,key:le},[$t(re,{class:Ce})])})]),s("div",{class:"".concat(e.prefixCls,"-img-wrapper"),style:{transform:"translate3d(".concat(I.x,"px, ").concat(I.y,"px, 0)")}},[s("img",{onMousedown:Le,onDblclick:Me,ref:j,class:"".concat(e.prefixCls,"-img"),src:d.value,alt:e.alt,style:{transform:"scale3d(".concat(v.value,", ").concat(v.value,", 1) rotate(").concat(L.value,"deg)")}},null)]),M.value&&s("div",{class:ve("".concat(e.prefixCls,"-switch-left"),q({},"".concat(e.prefixCls,"-switch-left-disabled"),l.value<=0)),onClick:X},[f]),M.value&&s("div",{class:ve("".concat(e.prefixCls,"-switch-right"),q({},"".concat(e.prefixCls,"-switch-right-disabled"),l.value>=o.value-1)),onClick:Z},[S])]}})}}});const wt=rn;var an=["icons","maskClassName"],ht=function(){return{src:String,wrapperClassName:String,wrapperStyle:{type:Object,default:void 0},rootClassName:String,prefixCls:String,previewPrefixCls:String,previewMask:{type:[Boolean,Function],default:void 0},placeholder:Dt.any,fallback:String,preview:{type:[Boolean,Object],default:!0},onClick:{type:Function},onError:{type:Function}}},Ct=function(e,i){var a=p({},e);return Object.keys(i).forEach(function(r){e[r]===void 0&&(a[r]=i[r])}),a},on=0,bt=Q({compatConfig:{MODE:3},name:"Image",inheritAttrs:!1,props:ht(),emits:["click","error"],setup:function(e,i){var a=i.attrs,r=i.slots,c=i.emit,C=g(function(){return e.prefixCls}),b=g(function(){return"".concat(C.value,"-preview")}),_=g(function(){var x={visible:void 0,onVisibleChange:function(){},getContainer:void 0};return Re(e.preview)==="object"?Ct(e.preview,x):x}),u=g(function(){var x;return(x=_.value.src)!==null&&x!==void 0?x:e.src}),m=g(function(){return e.placeholder&&e.placeholder!==!0||r.placeholder}),f=g(function(){return _.value.visible}),S=g(function(){return _.value.getContainer}),v=g(function(){return f.value!==void 0}),L=function(F,X){var Z,Y;(Z=(Y=_.value).onVisibleChange)===null||Z===void 0||Z.call(Y,F,X)},V=ot(!!f.value,{value:f,onChange:L}),G=we(V,2),I=G[0],$=G[1];J(I,function(x,F){L(x,F)});var E=k(m.value?"loading":"normal");J(function(){return e.src},function(){E.value=m.value?"loading":"normal"});var j=k(null),R=g(function(){return E.value==="error"}),D=De.inject(),U=D.isPreviewGroup,P=D.setCurrent,h=D.setShowPreview,A=D.setMousePosition,N=D.registerImage,o=k(on++),n=g(function(){return e.preview&&!R.value}),l=function(){E.value="normal"},d=function(F){E.value="error",c("error",F)},M=function(F){if(!v.value){var X=ut(F.target),Z=X.left,Y=X.top;U.value?(P(o.value),A({x:Z,y:Y})):j.value={x:Z,y:Y}}U.value?h(!0):$(!0),c("click",F)},T=function(){$(!1),v.value||(j.value=null)},ee=k(null);J(function(){return ee},function(){E.value==="loading"&&ee.value.complete&&(ee.value.naturalWidth||ee.value.naturalHeight)&&l()});var te=function(){};$e(function(){J([u,n],function(){if(te(),!U.value)return function(){};te=N(o.value,u.value,n.value),n.value||te()},{flush:"post",immediate:!0})}),st(function(){te()});var de=function(F){return Qt(F)?F+"px":F};return function(){var x=e.prefixCls,F=e.wrapperClassName,X=e.fallback,Z=e.src,Y=e.placeholder,Se=e.wrapperStyle,Ce=e.rootClassName,_e=a.width,me=a.height,Le=a.crossorigin,be=a.decoding,Pe=a.alt,Ie=a.sizes,Me=a.srcset,ge=a.usemap,y=a.class,w=a.style,W=_.value,ne=W.icons,H=W.maskClassName,re=Et(W,an),K=ve(x,F,Ce,q({},"".concat(x,"-error"),R.value)),le=R.value&&X?X:u.value,se={crossorigin:Le,decoding:be,alt:Pe,sizes:Ie,srcset:Me,usemap:ge,class:ve("".concat(x,"-img"),q({},"".concat(x,"-img-placeholder"),Y===!0),y),style:p({height:me},w)};return s(xe,null,[s("div",{class:K,onClick:n.value?M:function(yt){c("click",yt)},style:p({width:de(_e),height:de(me)},Se)},[s("img",p(p(p({},se),R.value&&X?{src:X}:{onLoad:l,onError:d,src:Z}),{},{ref:ee}),null),E.value==="loading"&&s("div",{"aria-hidden":"true",class:"".concat(x,"-placeholder")},[Y||r.placeholder&&r.placeholder()]),r.previewMask&&n.value&&s("div",{class:["".concat(x,"-mask"),H]},[r.previewMask()])]),!U.value&&n.value&&s(wt,p(p({},re),{},{"aria-hidden":!I.value,visible:I.value,prefixCls:b.value,onClose:T,mousePosition:j.value,src:le,alt:Pe,getContainer:S.value,icons:ne,rootClassName:Ce}),null)])}}});bt.PreviewGroup=pt;const ln=bt;var sn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"};const un=sn;function et(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable}))),a.forEach(function(r){cn(t,r,i[r])})}return t}function cn(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ee=function(e,i){var a=et({},e,i.attrs);return s(Oe,et({},a,{icon:un}),null)};Ee.displayName="RotateLeftOutlined";Ee.inheritAttrs=!1;const vn=Ee;var fn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"};const dn=fn;function tt(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable}))),a.forEach(function(r){mn(t,r,i[r])})}return t}function mn(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Fe=function(e,i){var a=tt({},e,i.attrs);return s(Oe,tt({},a,{icon:dn}),null)};Fe.displayName="RotateRightOutlined";Fe.inheritAttrs=!1;const gn=Fe;var pn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};const wn=pn;function nt(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable}))),a.forEach(function(r){hn(t,r,i[r])})}return t}function hn(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var je=function(e,i){var a=nt({},e,i.attrs);return s(Oe,nt({},a,{icon:wn}),null)};je.displayName="ZoomInOutlined";je.inheritAttrs=!1;const Cn=je;var bn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};const Pn=bn;function rt(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable}))),a.forEach(function(r){yn(t,r,i[r])})}return t}function yn(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ue=function(e,i){var a=rt({},e,i.attrs);return s(Oe,rt({},a,{icon:Pn}),null)};Ue.displayName="ZoomOutOutlined";Ue.inheritAttrs=!1;const xn=Ue;var Pt={rotateLeft:s(vn,null,null),rotateRight:s(gn,null,null),zoomIn:s(Cn,null,null),zoomOut:s(xn,null,null),close:s(ct,null,null),left:s(vt,null,null),right:s(ft,null,null)},On=Q({compatConfig:{MODE:3},name:"AImagePreviewGroup",inheritAttrs:!1,props:{previewPrefixCls:String},setup:function(e,i){var a=i.attrs,r=i.slots,c=dt("image",e),C=c.getPrefixCls,b=g(function(){return C("image-preview",e.previewPrefixCls)});return function(){return s(pt,p(p({},p(p({},a),e)),{},{icons:Pt,previewPrefixCls:b.value}),r)}}});const Sn=On;var oe=Q({name:"AImage",inheritAttrs:!1,props:ht(),setup:function(e,i){var a=i.slots,r=i.attrs,c=dt("image",e),C=c.prefixCls,b=c.rootPrefixCls,_=c.configProvider,u=g(function(){var m=e.preview;if(m===!1)return m;var f=Re(m)==="object"?m:{};return p(p({icons:Pt},f),{},{transitionName:We(b.value,"zoom",f.transitionName),maskTransitionName:We(b.value,"fade",f.maskTransitionName)})});return function(){var m,f=((m=_.locale)===null||m===void 0?void 0:m.Image)||Ft.Image,S=function(){return s("div",{class:"".concat(C.value,"-mask-info")},[s(jt,null,null),f==null?void 0:f.preview])},v=e.previewMask,L=v===void 0?a.previewMask||S:v;return s(ln,p(p({},p(p(p({},r),e),{},{prefixCls:C.value})),{},{preview:u.value}),p(p({},a),{},{previewMask:typeof L=="function"?L:null}))}}});oe.PreviewGroup=Sn;oe.install=function(t){return t.component(oe.name,oe),t.component(oe.PreviewGroup.name,oe.PreviewGroup),t};const at=oe;Q({name:"ImagePreview",components:{Image:at,PreviewGroup:at.PreviewGroup},props:{functional:z.bool,imageList:{type:Array}},setup(t){const{prefixCls:e}=mt("image-preview"),i=g(()=>{const{imageList:a}=t;return a?a.map(r=>Ut(r)?{src:r,placeholder:!1}:r):[]});return{prefixCls:e,getImageList:i}}});const _n="/assets/resume.6e209205.svg",Ln="/assets/p-rotate.1d232189.svg",In="/assets/scale.8d8ebde4.svg",Mn="/assets/unscale.99ad049c.svg",kn="/assets/unrotate.f9dd5a27.svg";var ce=function(t){return t[t.LOADING=0]="LOADING",t[t.DONE=1]="DONE",t[t.FAIL=2]="FAIL",t}(ce||{});const Nn={show:{type:Boolean,default:!1},imageList:{type:[Array],default:null},index:{type:Number,default:0},scaleStep:{type:Number},defaultWidth:{type:Number},maskClosable:{type:Boolean},rememberState:{type:Boolean}},B="img-preview",An=Q({name:"ImagePreview",props:Nn,emits:["img-load","img-error"],setup(t,{expose:e,emit:i}){const a=new Map,r=fe({currentUrl:"",imgScale:1,imgRotate:0,imgTop:0,imgLeft:0,status:ce.LOADING,currentIndex:0,moveX:0,moveY:0,show:t.show}),c=k(null),C=k(null);function b(){u();const{index:n,imageList:l}=t;if(!l||!l.length)throw new Error("imageList is undefined");r.currentIndex=n,V(l[n])}function _(){r.imgScale=1,r.imgRotate=0,r.imgTop=0,r.imgLeft=0}function u(){const n=O(c);!n||(n.onmousewheel=f,document.body.addEventListener("DOMMouseScroll",f),document.ondragstart=function(){return!1})}const m=g(()=>{var l;const n=(l=t==null?void 0:t.scaleStep)!=null?l:0;return(n!=null?n:0>0)?n/100:r.imgScale/10});function f(n){n=n||window.event,n.delta=n.wheelDelta||-n.detail,n.preventDefault(),n.delta>0&&S(m.value),n.delta<0&&S(-m.value)}function S(n){r.imgScale<=.2&&n<0||(r.imgScale+=n)}function v(n){r.imgRotate+=n}function L(){const n=O(C);!n||(n.onmousemove=null)}function V(n){r.status=ce.LOADING;const l=new Image;l.src=n,l.onload=d=>{if(r.currentUrl!==n){const M=d.composedPath();if(t.rememberState){a.set(r.currentUrl,{scale:r.imgScale,top:r.imgTop,left:r.imgLeft,rotate:r.imgRotate});const T=a.get(n);T?(r.imgScale=T.scale,r.imgTop=T.top,r.imgRotate=T.rotate,r.imgLeft=T.left):(_(),t.defaultWidth&&(r.imgScale=t.defaultWidth/M[0].naturalWidth))}else t.defaultWidth&&(r.imgScale=t.defaultWidth/M[0].naturalWidth);M&&i("img-load",{index:r.currentIndex,dom:M[0],url:n})}r.currentUrl=n,r.status=ce.DONE},l.onerror=d=>{const M=d.composedPath();M&&i("img-error",{index:r.currentIndex,dom:M[0],url:n}),r.status=ce.FAIL}}function G(n){n&&n.stopPropagation(),I()}function I(){r.show=!1,document.body.removeEventListener("DOMMouseScroll",f),document.ondragstart=null}function $(){_()}e({resume:$,close:I,prev:E.bind(null,"left"),next:E.bind(null,"right"),setScale:n=>{n>0&&n<=10&&(r.imgScale=n)},setRotate:n=>{r.imgRotate=n}});function E(n){const{currentIndex:l}=r,{imageList:d}=t;n==="left"&&(r.currentIndex--,l<=0&&(r.currentIndex=d.length-1)),n==="right"&&(r.currentIndex++,l>=d.length-1&&(r.currentIndex=0)),V(d[r.currentIndex])}function j(n){n=n||window.event,r.moveX=n.clientX,r.moveY=n.clientY;const l=O(C);l&&(l.onmousemove=R)}function R(n){n=n||window.event,n.preventDefault();const l=n.clientX-r.moveX,d=n.clientY-r.moveY;r.imgLeft+=l,r.imgTop+=d,r.moveX=n.clientX,r.moveY=n.clientY}const D=g(()=>{const{imgScale:n,imgRotate:l,imgTop:d,imgLeft:M}=r;return{transform:`scale(${n}) rotate(${l}deg)`,marginTop:`${d}px`,marginLeft:`${M}px`,maxWidth:t.defaultWidth?"unset":"100%"}}),U=g(()=>{const{imageList:n}=t;return n.length>1});lt(()=>{t.show&&b(),t.imageList&&_()});const P=n=>{t.maskClosable&&n.target&&n.target.classList.contains(`${B}-content`)&&G(n)},h=()=>s("div",{class:`${B}__close`,onClick:G},[s(ct,{class:`${B}__close-icon`},null)]),A=()=>{if(!O(U))return null;const{currentIndex:n}=r,{imageList:l}=t;return s("div",{class:`${B}__index`},[n+1,zt(" / "),l.length])},N=()=>s("div",{class:`${B}__controller`},[s("div",{class:`${B}__controller-item`,onClick:()=>S(-m.value)},[s("img",{src:Mn},null)]),s("div",{class:`${B}__controller-item`,onClick:()=>S(m.value)},[s("img",{src:In},null)]),s("div",{class:`${B}__controller-item`,onClick:$},[s("img",{src:_n},null)]),s("div",{class:`${B}__controller-item`,onClick:()=>v(-90)},[s("img",{src:kn},null)]),s("div",{class:`${B}__controller-item`,onClick:()=>v(90)},[s("img",{src:Ln},null)])]),o=n=>O(U)?s("div",{class:[`${B}__arrow`,n],onClick:()=>E(n)},[n==="left"?s(vt,null,null):s(ft,null,null)]):null;return()=>r.show&&s("div",{class:B,ref:c,onMouseup:L,onClick:P},[s("div",{class:`${B}-content`},[s("img",{style:O(D),class:[`${B}-image`,r.status===ce.DONE?"":"hidden"],ref:C,src:r.currentUrl,onMousedown:j},null),h(),A(),N(),o("left"),o("right")])])}});let Ne=null;function $n(t){var a;if(!Vt)return;const e={},i=document.createElement("div");return Object.assign(e,{show:!0,index:0,scaleStep:100},t),Ne=s(An,e),Tt(Ne,i),document.body.appendChild(i),(a=Ne.component)==null?void 0:a.exposed}var Ae=(t=>(t.all="all",t.image="image",t.file="file",t))(Ae||{});const Rn={class:"upload-download-handler"},Dn={class:"upload-mover-handler"},En=Q({__name:"UploadItemActions",props:{element:{type:HTMLElement,required:!0},fileList:{type:Object,required:!0},mover:{type:Boolean,required:!0},download:{type:Boolean,required:!0},emitValue:{type:Function,required:!0}},setup(t){const e=t,{createMessage:i}=gt(),a=g(()=>O(e.fileList));function r(){let u=b();if(u===-1){i.warn("\u79FB\u52A8\u5931\u8D25\uFF1A"+u);return}if(u===0){C(u,O(a).length-1);return}C(u,u-1)}function c(){let u=b();if(u===-1){i.warn("\u79FB\u52A8\u5931\u8D25\uFF1A"+u);return}if(u==O(a).length-1){C(u,0);return}C(u,u+1)}function C(u,m){if(u!==m){let f=[...O(a)],S=f[u];f[u]=f[m],f[m]=S,e.emitValue(f.map(v=>v.url).join(","))}}function b(){var m,f;const u=(f=(m=e.element)==null?void 0:m.getElementsByTagName("img")[0])==null?void 0:f.src;if(u){const S=O(a);for(let v=0;v<S.length;v++){let L=S[v].url;const V=u.replace(window.location.origin,"");if(L===V||encodeURI(L)===V)return v}}return-1}function _(){var m,f;const u=(f=(m=e.element)==null?void 0:m.getElementsByTagName("img")[0])==null?void 0:f.src;window.open(u)}return(u,m)=>(pe(),ye(xe,null,[Xe(ie("div",Rn,[ie("a",{class:"download",title:"\u4E0B\u8F7D",onClick:_},[s(O(he),{icon:"ant-design:download"})])],512),[[Ze,t.download]]),Xe(ie("div",Dn,[ie("a",{title:"\u5411\u524D\u79FB\u52A8",onClick:r},[s(O(he),{icon:"ant-design:arrow-left"})]),ie("a",{title:"\u5411\u540E\u79FB\u52A8",onClick:c},[s(O(he),{icon:"ant-design:arrow-right"})])],512),[[Ze,t.mover&&O(a).length>1]])],64))}}),Fn={key:0},jn={class:"ant-upload-text"},Tn=Q({__name:"JUpload",props:{value:z.oneOfType([z.string,z.array]),text:z.string.def("\u4E0A\u4F20"),fileType:z.string.def(Ae.all),bizPath:z.string.def("temp"),returnUrl:z.bool.def(!0),maxCount:z.number.def(0),buttonVisible:z.bool.def(!0),multiple:z.bool.def(!0),mover:z.bool.def(!0),download:z.bool.def(!0),removeConfirm:z.bool.def(!1),beforeUpload:z.func,disabled:z.bool.def(!1)},emits:["change","update:value"],setup(t,{expose:e,emit:i}){const a=t,{createMessage:r,createConfirm:c}=gt(),{prefixCls:C}=mt("j-upload"),b=Bt(),_=fe({"X-Access-Token":Gt()}),u=k([]),m=k(!0),f=k(),S=g(()=>a.maxCount>0&&u.value.length>=a.maxCount),v=g(()=>a.fileType===Ae.image),L=g(()=>{const o=Object.assign({},a,b);return o.name="file",o.listType=v.value?"picture-card":"text",o.class=[o.class,{"upload-disabled":a.disabled}],o.data=Te({biz:a.bizPath},o.data),o.beforeUpload||(o.beforeUpload=j),v.value&&!o.accept&&(o.accept="image/*"),o});J(()=>a.value,o=>{Array.isArray(o)?a.returnUrl?$(o.join(",")):E(o):$(o)},{immediate:!0}),J(u,()=>Yt(()=>G()),{immediate:!0});const V="ant-upload-list-item";function G(){if(!v.value)return;const o=f.value?f.value.getElementsByClassName(V):null;if(!(!o||o.length===0))for(const n of o)n.getAttribute("data-has-actions")==="true"||n.addEventListener("mouseover",I)}function I(o){const l=(()=>{for(const T of o.path){if(T.classList.contains(V))return T;if(T.classList.contains(`${C}-container`))return null}return null})();if(!l)return;const d=l.getElementsByClassName("ant-upload-list-item-actions");if(!d||d.length===0)return;const M=document.createElement("div");M.className="upload-actions-container",Ht(En,{element:l,fileList:u,mover:a.mover,download:a.download,emitValue:h}).mount(M),d[0].appendChild(M),l.setAttribute("data-has-actions","true"),l.removeEventListener("mouseover",I)}function $(o){if(!o||o.length==0){u.value=[];return}let n=[];for(const l of o.split(",")){let d=ke(l);n.push({uid:A(),name:N(l),status:"done",url:d,response:{status:"history",message:l}})}u.value=n}function E(o){if(!o||o.length==0){u.value=[];return}let n=[];for(const l of o){let d=ke(l.filePath);n.push({uid:A(),name:l.fileName,url:d,status:"done",response:{status:"history",message:l.filePath}})}u.value=n}function j(o){return m.value=!0,v.value&&o.type.indexOf("image")<0?(r.warning("\u8BF7\u4E0A\u4F20\u56FE\u7247"),m.value=!1,!1):typeof a.beforeUpload=="function"?a.beforeUpload(o):!0}function R(){return a.removeConfirm?new Promise(o=>{c({title:"\u5220\u9664",content:`\u786E\u5B9A\u8981\u5220\u9664\u8FD9${v.value?"\u5F20\u56FE\u7247":"\u4E2A\u6587\u4EF6"}\u5417\uFF1F`,iconType:"warning",onOk:()=>o(!0),onCancel:()=>o(!1)})}):!0}function D(o){!o.file.status&&m.value===!1&&o.fileList.pop();let n=o.fileList;if(a.maxCount>0&&n.length>=a.maxCount)if(a.maxCount-n.length>=0)n=n.slice(-a.maxCount);else return;if(o.file.status==="done"?o.file.response.success&&(n=n.map(l=>{if(l.response){let d=l.response.message;l.url=ke(d)}return l})):o.file.status==="error"&&r.error(`${o.file.name} \u4E0A\u4F20\u5931\u8D25.`),u.value=n,o.file.status==="done"||o.file.status==="removed")if(a.returnUrl)U();else{let l=[];for(const d of n)if(d.status==="done"){let M={fileName:d.name,filePath:d.response.message,fileSize:d.size};l.push(M)}else return;h(l)}}function U(){let o=u.value,n="";(!o||o.length==0)&&(n="");let l=[];for(const d of o)if(d.status==="done")l.push(d.response.message);else return;l.length>0&&(n=l.join(",")),h(n)}function P(o){v.value?$n({imageList:[o.url],maskClosable:!0}):window.open(o.url)}function h(o){i("change",o),i("update:value",o)}function A(){return"-"+parseInt(Math.random()*1e4+1,10)}function N(o){if(o.lastIndexOf("\\")>=0){let n=new RegExp("\\\\","g");o=o.replace(n,"/")}return o.substring(o.lastIndexOf("/")+1)}return e({addActionsListener:G}),(o,n)=>{const l=Ye("a-button"),d=Ye("a-upload");return pe(),ye("div",{ref_key:"containerRef",ref:f,class:Zt(`${O(C)}-container`)},[s(d,Xt({headers:_,multiple:t.multiple,action:O(qt),fileList:u.value,disabled:t.disabled},O(L),{onRemove:R,onChange:D,onPreview:P}),{default:He(()=>[O(v)?(pe(),ye(xe,{key:0},[O(S)?Je("",!0):(pe(),ye("div",Fn,[s(O(he),{icon:"ant-design:plus-outlined"}),ie("div",jn,qe(t.text),1)]))],64)):t.buttonVisible?(pe(),Wt(l,{key:1,disabled:O(S)||t.disabled},{default:He(()=>[s(O(he),{icon:"ant-design:upload-outlined"}),ie("span",null,qe(t.text),1)]),_:1},8,["disabled"])):Je("",!0)]),_:1},16,["headers","multiple","action","fileList","disabled"])],2)}}});export{at as I,Ae as U,Tn as _,$n as c};
