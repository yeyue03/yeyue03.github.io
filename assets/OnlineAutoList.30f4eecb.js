import Te from"./BasicTable.0a886d20.js";import{T as Ie}from"./componentMap.fc77c2dc.js";import"./BasicTable.vue_vue_type_style_index_0_lang.fd294b48.js";import{ev as Me,E as ve,r as s,s as t,t as b,v as d,Q as u,w as i,y as h,R as m,ax as L,bc as De,z as E,N as Re,O as Fe,aW as F,B as Oe,dD as Le,by as Pe,bz as Ae,x as Qe,el as _e,dv as Je,ad as He,u as qe}from"./index.d6323a8b.js";import"./useTable.2733e6a7.js";import Ne from"./OnlineAutoModal.59109800.js";import $e from"./OnlineCustomModal.9beb14e7.js";import ze from"./OnlineDetailModal.c6d27d6d.js";import{J as Ve}from"./JImportModal.dfcfbce6.js";import{u as je,a as Ke}from"./useListButton.3b857ce2.js";import{a as Ue,c as We,j as Ge,g as Xe}from"./useAutoForm.0cd9b496.js";import Ye from"./OnlineQueryForm.40091a2c.js";import Ze from"./SuperQuery.d5945cff.js";import"./index.d82ed84a.js";import"./BasicForm.vue_vue_type_style_index_0_lang.3b7179f6.js";import"./JUpload.vue_vue_type_style_index_0_lang.a2ed25c2.js";import"./JUploadModal.vue_vue_type_script_setup_true_lang.1a9447ac.js";import"./pick.b45371be.js";import"./omit.bfcc4eee.js";import"./OnlineSelectCascade.85298a8d.js";import"./Area.b2923c7a.js";import"./LinkTableListPiece.85eca64f.js";import"./_flatRest.4980c73e.js";import"./isArray.1617b935.js";import"./toString.79810c3b.js";import"./_arrayPush.ca89106e.js";import"./_baseClone.34614d7c.js";import"./CommentPanel.7a915adb.js";import"./DetailForm.d969895b.js";import"./api.47fd90c6.js";import"./SuperQueryValComponent.vue_vue_type_script_lang.fb040503.js";import"./useForm.c448380d.js";import"./useFormItem.3a0d2c3a.js";import"./BasicModal.d35d2f99.js";import"./useWindowSizeFn.0b6b5a55.js";import"./download.17d84636.js";import"./base64Conver.030fa32c.js";import"./index.51946d8c.js";import"./index.6450ecda.js";import"./useCountdown.5d182bba.js";import"./areaDataUtil.8b289fd7.js";import"./props.184f6ff3.js";import"./index.e9877282.js";import"./bem.40e6f864.js";import"./props.5cd8551a.js";import"./useContextMenu.d4034b7b.js";import"./index.53758bc7.js";import"./onMountedOrActivated.f230a25e.js";import"./depart.api.2cd5c45f.js";import"./index.56d246a9.js";import"./uniqBy.b473c125.js";import"./index.1430ee38.js";import"./useContentHeight.618fc37a.js";import"./useContentViewHeight.68b39758.js";import"./usePageContext.c54f47f4.js";import"./RedoOutlined.2aa4f93d.js";import"./OnlineForm.5b66322d.js";import"./FormSchemaFactory.4bc99456.js";import"./user.api.2e174b62.js";import"./_commonjsHelpers.7ef9cff5.js";import"./customExpression.05dc2408.js";import"./useListPage.148819a1.js";import"./JModalTip.ba16ebfb.js";import"./EditOutlined.b6cbdd0d.js";import"./_baseSlice.23bb44df.js";import"./OnlineFormDetail.67c3a820.js";import"./OnlineSubFormDetail.7a00151d.js";var P=(e,p,l)=>new Promise((c,g)=>{var S=a=>{try{r(l.next(a))}catch(f){g(f)}},B=a=>{try{r(l.throw(a))}catch(f){g(f)}},r=a=>a.done?c(a.value):Promise.resolve(a.value).then(S,B);r((l=l.apply(e,p)).next())});const xe=Symbol(),eo="openpopmodal";function oo(e){const p=Je();function l(c){e(c),console.log("\u4E8B\u4EF6\u89E6\u53D1\u5B8C\u6210,",c)}p.on(eo,l),no({onlineEmitter:p}),console.log("\u4E8B\u4EF6\u7ED1\u5B8C\u6210,")}function no(e){return He(e,xe,{readonly:!1,native:!0})}const to={name:"DefaultOnlineList",components:{BasicTable:Te,TableAction:Ie,OnlineAutoModal:Ne,JImportModal:Ve,OnlineQueryForm:Ye,OnlineSuperQuery:Ze,OnlineCustomModal:$e,OnlineDetailModal:ze,OnlinePopModal:Ue},setup(){const{createMessage:e}=qe(),{ID:p,onlineTableContext:l,onlineQueryFormOuter:c,loading:g,reload:S,dataSource:B,pagination:r,handleSpecialConfig:a,getColumnList:f,handleChangeInTable:T,loadData:I,superQueryButtonRef:y,superQueryStatus:M,handleSuperQuery:v,onlineExtConfigJson:w,handleFormConfig:D,registerCustomModal:o,tableReloading:C}=je();if(!p.value){e.warning("\u5730\u5740\u9519\u8BEF, \u914D\u7F6EID\u4E0D\u5B58\u5728!");return}let{initCgEnhanceJs:R}=We(l);const{buttonSwitch:A,cgLinkButtonList:Q,cgTopButtonList:_,importUrl:J,registerModal:H,handleAdd:q,handleEdit:N,handleBatchDelete:$,registerImportModal:z,onImportExcel:V,onExportExcel:j,cgButtonJsHandler:K,cgButtonActionHandler:U,cgButtonLinkHandler:W,handleSubmitFlow:G,getDropDownActions:X,getActions:Y,initButtonList:Z,initButtonSwitch:x,registerDetailModal:ee,registerBpmModal:oe}=Ke(l,w),{columns:ne,actionColumn:te,selectedKeys:ie,rowSelection:le,enableScrollBar:re,tableScroll:ae,downloadRowFile:se,getImgView:ue,getPcaText:pe,getFormatDate:de,handleColumnResult:me,hrefComponent:ce,viewOnlineCellImage:ge,hrefMainTableId:fe,registerOnlineHrefModal:he,registerPopModal:ye,openPopModal:Ce,onlinePopModalRef:be,popTableId:O}=Ge(l,w);ve(p,()=>{console.log("watched id is change..."),Se()},{immediate:!0});function Se(){return P(this,null,function*(){g.value=!0;let n=yield f();Be(n),yield I(),g.value=!1,l.execButtonEnhance("setup")})}function Be(n){let k=R(n.enhanceJs);l.EnhanceJS=k,Z(n.cgButtonList),x(n.hideColumns),me(n),a(n)}function we(n){l.queryParam=n,S()}function ke(n){return P(this,null,function*(){yield Xe(y),y.value.init(n)})}function Ee(n){console.log("openOnlinePopModal",n),O.value=n.id;let k={title:n.describe};n.record&&n.record.id&&(k.record=n.record,k.isUpdate=!0),Ce(!0,k)}return oo(Ee),{ID:p,onlineQueryFormOuter:c,queryWithCondition:we,onQueryFormLoaded:ke,reload:S,superQueryButtonRef:y,superQueryStatus:M,handleSuperQuery:v,loading:g,columns:ne,dataSource:B,pagination:r,actionColumn:te,rowSelection:le,selectedKeys:ie,tableScroll:ae,enableScrollBar:re,handleChangeInTable:T,buttonSwitch:A,handleAdd:q,handleEdit:N,onImportExcel:V,onExportExcel:j,cgTopButtonList:_,cgLinkButtonList:Q,cgButtonJsHandler:K,cgButtonActionHandler:U,cgButtonLinkHandler:W,handleBatchDelete:$,downloadRowFile:se,getImgView:ue,getPcaText:pe,getFormatDate:de,getActions:Y,getDropDownActions:X,registerModal:H,registerCustomModal:o,registerImportModal:z,registerDetailModal:ee,importUrl:J,handleFormConfig:D,onlinePopModalRef:be,tableReloading:C,handleSubmitFlow:G,hrefComponent:ce,viewOnlineCellImage:ge,hrefMainTableId:fe,onlineExtConfigJson:w,registerOnlineHrefModal:he,registerPopModal:ye,popTableId:O,registerBpmModal:oe}}},io={class:"p-2"},lo={key:0,style:{"font-size":"12px","font-style":"italic"}},ro={key:0,style:{"font-size":"12px","font-style":"italic"}},ao=["src","onClick"],so=["innerHTML"],uo=["title"];function po(e,p,l,c,g,S){const B=s("online-query-form"),r=s("a-button"),a=s("online-super-query"),f=s("TableAction"),T=s("BasicTable"),I=s("OnlineAutoModal"),y=s("online-detail-modal"),M=s("JImportModal"),v=s("a-modal"),w=s("online-custom-modal"),D=s("online-pop-modal");return t(),b("div",io,[d(B,{ref:"onlineQueryFormOuter",id:e.ID,onSearch:e.queryWithCondition,onLoaded:e.onQueryFormLoaded},null,8,["id","onSearch","onLoaded"]),e.tableReloading?m("",!0):(t(),u(T,{key:0,ref:"onlineTable",rowKey:"jeecg_row_key",canResize:!0,bordered:!0,showIndexColumn:!1,loading:e.loading,columns:e.columns,dataSource:e.dataSource,pagination:e.pagination,rowSelection:e.rowSelection,actionColumn:e.actionColumn,showTableSetting:!0,clickToRowSelect:!1,scroll:e.tableScroll,onTableRedo:e.reload,class:Oe({"j-table-force-nowrap":e.enableScrollBar}),onChange:e.handleChangeInTable},{tableTitle:i(()=>[e.buttonSwitch.add?(t(),u(r,{key:0,preIcon:"ant-design:plus-outlined",type:"primary",onClick:e.handleAdd},{default:i(()=>[h("\u65B0\u589E")]),_:1},8,["onClick"])):m("",!0),e.buttonSwitch.import?(t(),u(r,{key:1,preIcon:"ant-design:import-outlined",type:"primary",onClick:e.onImportExcel},{default:i(()=>[h("\u5BFC\u5165")]),_:1},8,["onClick"])):m("",!0),e.buttonSwitch.export?(t(),u(r,{key:2,preIcon:"ant-design:export-outlined",type:"primary",onClick:e.onExportExcel},{default:i(()=>[h(" \u5BFC\u51FA")]),_:1},8,["onClick"])):m("",!0),e.cgTopButtonList&&e.cgTopButtonList.length>0?(t(!0),b(L,{key:3},De(e.cgTopButtonList,(o,C)=>(t(),b(L,null,[o.optType=="js"?(t(),u(r,{key:"cgbtn"+C,onClick:R=>e.cgButtonJsHandler(o.buttonCode),type:"primary",preIcon:o.buttonIcon?"ant-design:"+o.buttonIcon:""},{default:i(()=>[h(E(o.buttonName),1)]),_:2},1032,["onClick","preIcon"])):o.optType=="action"?(t(),u(r,{key:"cgbtn"+C,onClick:R=>e.cgButtonActionHandler(o.buttonCode),type:"primary",preIcon:o.buttonIcon?"ant-design:"+o.buttonIcon:""},{default:i(()=>[h(E(o.buttonName),1)]),_:2},1032,["onClick","preIcon"])):m("",!0)],64))),256)):m("",!0),e.buttonSwitch.batch_delete?Re((t(),u(r,{key:4,preIcon:"ant-design:delete-outlined",onClick:e.handleBatchDelete},{default:i(()=>[h(" \u6279\u91CF\u5220\u9664")]),_:1},8,["onClick"])),[[Fe,e.selectedKeys.length>0]]):m("",!0),e.buttonSwitch.super_query?(t(),u(a,{key:5,ref:"superQueryButtonRef",online:"",status:e.superQueryStatus,onSearch:e.handleSuperQuery},null,8,["status","onSearch"])):m("",!0)]),fileSlot:i(({text:o})=>[o?(t(),u(r,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:C=>e.downloadRowFile(o)},{default:i(()=>[h(" \u4E0B\u8F7D ")]),_:2},1032,["onClick"])):(t(),b("span",lo,"\u65E0\u6587\u4EF6"))]),imgSlot:i(({text:o})=>[o?(t(),b("img",{key:1,src:e.getImgView(o),alt:"\u56FE\u7247\u4E0D\u5B58\u5728",class:"online-cell-image",onClick:C=>e.viewOnlineCellImage(o)},null,8,ao)):(t(),b("span",ro,"\u65E0\u56FE\u7247"))]),htmlSlot:i(({text:o})=>[F("div",{innerHTML:o},null,8,so)]),pcaSlot:i(({text:o})=>[F("div",{title:e.getPcaText(o)},E(e.getPcaText(o)),9,uo)]),dateSlot:i(({text:o})=>[F("span",null,E(e.getFormatDate(o)),1)]),action:i(({record:o})=>[d(f,{actions:e.getActions(o),dropDownActions:e.getDropDownActions(o)},null,8,["actions","dropDownActions"])]),_:1},8,["loading","columns","dataSource","pagination","rowSelection","actionColumn","scroll","onTableRedo","class","onChange"])),d(I,{id:e.ID,onRegister:e.registerModal,onSuccess:e.reload,onFormConfig:e.handleFormConfig},null,8,["id","onRegister","onSuccess","onFormConfig"]),d(y,{id:e.ID,onRegister:e.registerDetailModal},null,8,["id","onRegister"]),d(M,{onRegister:e.registerImportModal,url:e.importUrl(),onOk:e.reload,online:""},null,8,["onRegister","url","onOk"]),d(v,Qe(e.hrefComponent.model,_e(e.hrefComponent.on)),{default:i(()=>[(t(),u(Le(e.hrefComponent.is),Pe(Ae(e.hrefComponent.params)),null,16))]),_:1},16),d(w,{onRegister:e.registerCustomModal,onSuccess:e.reload},null,8,["onRegister","onSuccess"]),d(y,{id:e.hrefMainTableId,onRegister:e.registerOnlineHrefModal,defaultFullscreen:!1},null,8,["id","onRegister"]),d(D,{ref:"onlinePopModalRef",id:e.popTableId,onRegister:e.registerPopModal,onSuccess:e.reload,request:"",topTip:""},null,8,["id","onRegister","onSuccess"])])}var Mn=Me(to,[["render",po]]);export{Mn as default};
