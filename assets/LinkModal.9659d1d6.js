var f=(k,m,t)=>new Promise((u,a)=>{var p=o=>{try{e(t.next(o))}catch(r){a(r)}},s=o=>{try{e(t.throw(o))}catch(r){a(r)}},e=o=>o.done?u(o.value):Promise.resolve(o.value).then(p,s);e((t=t.apply(k,m)).next())});import{j as I,C as c,a7 as B,bH as A,r as y,s as _,Q as v,w as N,aW as x,v as n,N as h,O as S,R as g,x as O,H as C,M,q as D}from"./index.d6323a8b.js";import H from"./LinkStep1.184f07c5.js";import V from"./LinkStep2.9f1550a4.js";import j from"./LinkStep3.9e1b23e6.js";import{c as q,i as Q}from"./Device.api.43f940f3.js";import{B as T}from"./index.d82ed84a.js";import"./useForm.c448380d.js";import"./BasicForm.vue_vue_type_style_index_0_lang.3b7179f6.js";import"./componentMap.fc77c2dc.js";import"./useFormItem.3a0d2c3a.js";import"./JUpload.vue_vue_type_style_index_0_lang.a2ed25c2.js";import"./api.47fd90c6.js";import"./BasicModal.d35d2f99.js";import"./useWindowSizeFn.0b6b5a55.js";import"./download.17d84636.js";import"./base64Conver.030fa32c.js";import"./index.51946d8c.js";import"./index.6450ecda.js";import"./useCountdown.5d182bba.js";import"./areaDataUtil.8b289fd7.js";import"./props.184f6ff3.js";import"./index.e9877282.js";import"./bem.40e6f864.js";import"./props.5cd8551a.js";import"./useContextMenu.d4034b7b.js";import"./index.53758bc7.js";import"./onMountedOrActivated.f230a25e.js";import"./depart.api.2cd5c45f.js";import"./index.56d246a9.js";import"./uniqBy.b473c125.js";import"./data.efb22ccd.js";const W={class:"step-form-form"},$={class:"mt-5"},z=I({__name:"LinkModal",emits:["register","success"],setup(k,{emit:m}){const t=c(0),u=c("\u8FDE\u63A5\u8BBE\u5907"),a=c(),p=c(),s=B({ip:void 0,port:void 0,serialNo:void 0}),e=B({initStep2:!1,initStep3:!1}),[o,{setModalProps:r,closeModal:E}]=A(()=>f(this,null,function*(){r({confirmLoading:!1,showCancelBtn:!1,showOkBtn:!1})}));function w(i){q(i).then(l=>{l&&(t.value++,e.initStep2=!0,s.ip=i.ip,s.port=i.port,M(()=>{a.value.setVal(i)}))})}function L(){t.value--}function P(i){s.serialNo=i.serialNo,Q(s).then(l=>{l&&(t.value++,e.initStep3=!0,M(()=>{p.value.setVal(s)}))})}function R(){t.value=0,e.initStep2=!1,e.initStep3=!1}function b(){return f(this,null,function*(){try{r({confirmLoading:!0}),E(),m("success")}finally{r({confirmLoading:!1})}})}return(i,l)=>{const d=y("a-step"),F=y("a-steps");return _(),v(C(T),O(i.$attrs,{onRegister:C(o),destroyOnClose:"",title:u.value,width:896}),{default:N(()=>[x("div",W,[n(F,{current:t.value},{default:N(()=>[n(d,{title:"\u586B\u5165IP\u4E0E\u7AEF\u53E3"}),n(d,{title:"\u786E\u8BA4\u5E8F\u5217\u53F7"}),n(d,{title:"\u5B8C\u6210"})]),_:1},8,["current"])]),x("div",$,[h(n(H,{onNext:w},null,512),[[S,t.value===0]]),e.initStep2?h((_(),v(V,{key:0,ref_key:"step2",ref:a,onPrev:L,onNext:P},null,512)),[[S,t.value===1]]):g("",!0),e.initStep3?h((_(),v(j,{key:1,ref_key:"step3",ref:p,onRedo:R,onClose:b},null,512)),[[S,t.value===2]]):g("",!0)])]),_:1},16,["onRegister","title"])}}});const Ct=D(z,[["__scopeId","data-v-243be917"]]);export{Ct as default};
