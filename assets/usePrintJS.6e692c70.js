import{bP as P,M as O}from"./index.d6323a8b.js";var S={exports:{}};(function(g,y){(function(d,t){g.exports=t()})(window,function(){return function(s){var d={};function t(i){if(d[i])return d[i].exports;var a=d[i]={i,l:!1,exports:{}};return s[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=s,t.c=d,t.d=function(i,a,c){t.o(i,a)||Object.defineProperty(i,a,{enumerable:!0,get:c})},t.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},t.t=function(i,a){if(a&1&&(i=t(i)),a&8||a&4&&typeof i=="object"&&i&&i.__esModule)return i;var c=Object.create(null);if(t.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:i}),a&2&&typeof i!="string")for(var u in i)t.d(c,u,function(o){return i[o]}.bind(null,u));return c},t.n=function(i){var a=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(a,"a",a),a},t.o=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)},t.p="",t(t.s=0)}({"./src/index.js":function(s,d,t){t.r(d),t("./src/sass/index.scss");var i=t("./src/js/init.js"),a=i.default.init;typeof window!="undefined"&&(window.printJS=a),d.default=a},"./src/js/browser.js":function(s,d,t){t.r(d);var i={isFirefox:function(){return typeof InstallTrigger!="undefined"},isIE:function(){return navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode},isEdge:function(){return!i.isIE()&&!!window.StyleMedia},isChrome:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;return!!c.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||navigator.userAgent.toLowerCase().indexOf("safari")!==-1},isIOSChrome:function(){return navigator.userAgent.toLowerCase().indexOf("crios")!==-1}};d.default=i},"./src/js/functions.js":function(s,d,t){t.r(d),t.d(d,"addWrapper",function(){return u}),t.d(d,"capitalizePrint",function(){return o}),t.d(d,"collectStyles",function(){return l}),t.d(d,"addHeader",function(){return n}),t.d(d,"cleanUp",function(){return p}),t.d(d,"isRawHTML",function(){return b});var i=t("./src/js/modal.js"),a=t("./src/js/browser.js");function c(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(h){return typeof h}:c=function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},c(e)}function u(e,f){var h="font-family:"+f.font+" !important; font-size: "+f.font_size+" !important; width:100%;";return'<div style="'+h+'">'+e+"</div>"}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function l(e,f){for(var h=document.defaultView||window,m="",E=h.getComputedStyle(e,""),v=0;v<E.length;v++)(f.targetStyles.indexOf("*")!==-1||f.targetStyle.indexOf(E[v])!==-1||r(f.targetStyles,E[v]))&&E.getPropertyValue(E[v])&&(m+=E[v]+":"+E.getPropertyValue(E[v])+";");return m+="max-width: "+f.maxWidth+"px !important; font-size: "+f.font_size+" !important;",m}function r(e,f){for(var h=0;h<e.length;h++)if(c(f)==="object"&&f.indexOf(e[h])!==-1)return!0;return!1}function n(e,f){var h=document.createElement("div");if(b(f.header))h.innerHTML=f.header;else{var m=document.createElement("h1"),E=document.createTextNode(f.header);m.appendChild(E),m.setAttribute("style",f.headerStyle),h.appendChild(m)}e.insertBefore(h,e.childNodes[0])}function p(e){e.showModal&&i.default.close(),e.onLoadingEnd&&e.onLoadingEnd(),(e.showModal||e.onLoadingStart)&&window.URL.revokeObjectURL(e.printable);var f="mouseover";(a.default.isChrome()||a.default.isFirefox())&&(f="focus");var h=function m(){window.removeEventListener(f,m),e.onPrintDialogClose();var E=document.getElementById(e.frameId);E&&E.remove()};window.addEventListener(f,h)}function b(e){var f=new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>");return f.test(e)}},"./src/js/html.js":function(s,d,t){t.r(d);var i=t("./src/js/functions.js"),a=t("./src/js/print.js");function c(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(n){return typeof n}:c=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},c(l)}d.default={print:function(r,n){var p=o(r.printable)?r.printable:document.getElementById(r.printable);if(!p){window.console.error("Invalid HTML element id: "+r.printable);return}r.printableElement=u(p,r),r.header&&Object(i.addHeader)(r.printableElement,r),a.default.send(r,n)}};function u(l,r){for(var n=l.cloneNode(),p=Array.prototype.slice.call(l.childNodes),b=0;b<p.length;b++)if(r.ignoreElements.indexOf(p[b].id)===-1){var e=u(p[b],r);n.appendChild(e)}switch(r.scanStyles&&l.nodeType===1&&n.setAttribute("style",Object(i.collectStyles)(l,r)),l.tagName){case"SELECT":n.value=l.value;break;case"CANVAS":n.getContext("2d").drawImage(l,0,0);break}return n}function o(l){return c(l)==="object"&&l&&(l instanceof HTMLElement||l.nodeType===1)}},"./src/js/image.js":function(s,d,t){t.r(d);var i=t("./src/js/functions.js"),a=t("./src/js/print.js"),c=t("./src/js/browser.js");d.default={print:function(o,l){o.printable.constructor!==Array&&(o.printable=[o.printable]),o.printableElement=document.createElement("div"),o.printable.forEach(function(r){var n=document.createElement("img");if(n.setAttribute("style",o.imageStyle),n.src=r,c.default.isFirefox()){var p=n.src;n.src=p}var b=document.createElement("div");b.appendChild(n),o.printableElement.appendChild(b)}),o.header&&Object(i.addHeader)(o.printableElement,o),a.default.send(o,l)}}},"./src/js/init.js":function(s,d,t){t.r(d);var i=t("./src/js/browser.js"),a=t("./src/js/modal.js"),c=t("./src/js/pdf.js"),u=t("./src/js/html.js"),o=t("./src/js/raw-html.js"),l=t("./src/js/image.js"),r=t("./src/js/json.js");function n(b){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(f){return typeof f}:n=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},n(b)}var p=["pdf","html","image","json","raw-html"];d.default={init:function(){var e={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(M){throw M},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},f=arguments[0];if(f===void 0)throw new Error("printJS expects at least 1 attribute.");switch(n(f)){case"string":e.printable=encodeURI(f),e.fallbackPrintable=e.printable,e.type=arguments[1]||e.type;break;case"object":e.printable=f.printable,e.fallbackPrintable=typeof f.fallbackPrintable!="undefined"?f.fallbackPrintable:e.printable,e.fallbackPrintable=e.base64?"data:application/pdf;base64,".concat(e.fallbackPrintable):e.fallbackPrintable;for(var h in e)h==="printable"||h==="fallbackPrintable"||(e[h]=typeof f[h]!="undefined"?f[h]:e[h]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+n(f))}if(!e.printable)throw new Error("Missing printable information.");if(!e.type||typeof e.type!="string"||p.indexOf(e.type.toLowerCase())===-1)throw new Error("Invalid print type. Available types are: pdf, html, image and json.");e.showModal&&a.default.show(e),e.onLoadingStart&&e.onLoadingStart();var m=document.getElementById(e.frameId);m&&m.parentNode.removeChild(m);var E=document.createElement("iframe");switch(i.default.isFirefox()?E.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):E.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),E.setAttribute("id",e.frameId),e.type!=="pdf"&&(E.srcdoc="<html><head><title>"+e.documentTitle+"</title>",e.css&&(Array.isArray(e.css)||(e.css=[e.css]),e.css.forEach(function(w){E.srcdoc+='<link rel="stylesheet" href="'+w+'">'})),E.srcdoc+="</head><body></body></html>"),e.type){case"pdf":if(i.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var v=window.open(e.fallbackPrintable,"_blank");v.focus(),e.onIncompatibleBrowser()}catch(w){e.onError(w)}finally{e.showModal&&a.default.close(),e.onLoadingEnd&&e.onLoadingEnd()}else c.default.print(e,E);break;case"image":l.default.print(e,E);break;case"html":u.default.print(e,E);break;case"raw-html":o.default.print(e,E);break;case"json":r.default.print(e,E);break}}}},"./src/js/json.js":function(s,d,t){t.r(d);var i=t("./src/js/functions.js"),a=t("./src/js/print.js");function c(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(r){return typeof r}:c=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},c(o)}d.default={print:function(l,r){if(c(l.printable)!=="object")throw new Error("Invalid javascript data object (JSON).");if(typeof l.repeatTableHeader!="boolean")throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!l.properties||!Array.isArray(l.properties))throw new Error("Invalid properties array for your JSON data.");l.properties=l.properties.map(function(n){return{field:c(n)==="object"?n.field:n,displayName:c(n)==="object"?n.displayName:n,columnSize:c(n)==="object"&&n.columnSize?n.columnSize+";":100/l.properties.length+"%;"}}),l.printableElement=document.createElement("div"),l.header&&Object(i.addHeader)(l.printableElement,l),l.printableElement.innerHTML+=u(l),a.default.send(l,r)}};function u(o){var l=o.printable,r=o.properties,n='<table style="border-collapse: collapse; width: 100%;">';o.repeatTableHeader&&(n+="<thead>"),n+="<tr>";for(var p=0;p<r.length;p++)n+='<th style="width:'+r[p].columnSize+";"+o.gridHeaderStyle+'">'+Object(i.capitalizePrint)(r[p].displayName)+"</th>";n+="</tr>",o.repeatTableHeader&&(n+="</thead>"),n+="<tbody>";for(var b=0;b<l.length;b++){n+="<tr>";for(var e=0;e<r.length;e++){var f=l[b],h=r[e].field.split(".");if(h.length>1)for(var m=0;m<h.length;m++)f=f[h[m]];else f=f[r[e].field];n+='<td style="width:'+r[e].columnSize+o.gridStyle+'">'+f+"</td>"}n+="</tr>"}return n+="</tbody></table>",n}},"./src/js/modal.js":function(s,d,t){t.r(d);var i={show:function(c){var u="font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;",o=document.createElement("div");o.setAttribute("style",u),o.setAttribute("id","printJS-Modal");var l=document.createElement("div");l.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var r=document.createElement("div");r.setAttribute("class","printClose"),r.setAttribute("id","printClose"),l.appendChild(r);var n=document.createElement("span");n.setAttribute("class","printSpinner"),l.appendChild(n);var p=document.createTextNode(c.modalMessage);l.appendChild(p),o.appendChild(l),document.getElementsByTagName("body")[0].appendChild(o),document.getElementById("printClose").addEventListener("click",function(){i.close()})},close:function(){var c=document.getElementById("printJS-Modal");c&&c.parentNode.removeChild(c)}};d.default=i},"./src/js/pdf.js":function(s,d,t){t.r(d);var i=t("./src/js/print.js"),a=t("./src/js/functions.js");d.default={print:function(o,l){if(o.base64){var r=Uint8Array.from(atob(o.printable),function(p){return p.charCodeAt(0)});c(o,l,r);return}o.printable=/^(blob|http|\/\/)/i.test(o.printable)?o.printable:window.location.origin+(o.printable.charAt(0)!=="/"?"/"+o.printable:o.printable);var n=new window.XMLHttpRequest;n.responseType="arraybuffer",n.addEventListener("error",function(){Object(a.cleanUp)(o),o.onError(n.statusText,n)}),n.addEventListener("load",function(){if([200,201].indexOf(n.status)===-1){Object(a.cleanUp)(o),o.onError(n.statusText,n);return}c(o,l,n.response)}),n.open("GET",o.printable,!0),n.send()}};function c(u,o,l){var r=new window.Blob([l],{type:"application/pdf"});r=window.URL.createObjectURL(r),o.setAttribute("src",r),i.default.send(u,o)}},"./src/js/print.js":function(s,d,t){t.r(d);var i=t("./src/js/browser.js"),a=t("./src/js/functions.js"),c={send:function(n,p){document.getElementsByTagName("body")[0].appendChild(p);var b=document.getElementById(n.frameId);b.onload=function(){if(n.type==="pdf"){i.default.isFirefox()?setTimeout(function(){return u(b,n)},1e3):u(b,n);return}var e=b.contentWindow||b.contentDocument;if(e.document&&(e=e.document),e.body.appendChild(n.printableElement),n.type!=="pdf"&&n.style){var f=document.createElement("style");f.innerHTML=n.style,e.head.appendChild(f)}var h=e.getElementsByTagName("img");h.length>0?o(Array.from(h)).then(function(){return u(b,n)}):u(b,n)}}};function u(r,n){try{if(r.focus(),i.default.isEdge()||i.default.isIE())try{r.contentWindow.document.execCommand("print",!1,null)}catch(p){r.contentWindow.print()}else r.contentWindow.print()}catch(p){n.onError(p)}finally{i.default.isFirefox()&&(r.style.visibility="hidden",r.style.left="-1px"),Object(a.cleanUp)(n)}}function o(r){var n=r.map(function(p){if(p.src&&p.src!==window.location.href)return l(p)});return Promise.all(n)}function l(r){return new Promise(function(n){var p=function b(){!r||typeof r.naturalWidth=="undefined"||r.naturalWidth===0||!r.complete?setTimeout(b,500):n()};p()})}d.default=c},"./src/js/raw-html.js":function(s,d,t){t.r(d);var i=t("./src/js/print.js");d.default={print:function(c,u){c.printableElement=document.createElement("div"),c.printableElement.setAttribute("style","width:100%"),c.printableElement.innerHTML=c.printable,i.default.send(c,u)}}},"./src/sass/index.scss":function(s,d,t){},0:function(s,d,t){s.exports=t("./src/index.js")}}).default})})(S);const C=P(S.exports);class T{constructor(y){this.standards={strict:"strict",loose:"loose",html5:"html5"},this.counter=0,this.settings={standard:this.standards.html5,extraHead:"",extraCss:"",popTitle:"",endCallback:null,el:""},Object.assign(this.settings,y),this.init()}init(){this.counter++,this.settings.id=`printArea_${this.counter}`;let y=document.getElementById(this.settings.id);y&&y.parentNode.removeChild(y);let s=this.getPrintWindow();this.write(s.doc),this.settings.endCallback()}print(y){let s=y;console.log("---\u8C03\u7528\u6253\u5370 focus-----"),s.focus(),s.print(),console.log("---\u8C03\u7528\u6253\u5370 print-----")}write(y,s){y.open(),y.write(`${this.docType()}<html>${this.getHead()}${this.getBody()}</html>`),y.close()}docType(){if(this.settings.standard===this.standards.html5)return"<!DOCTYPE html>";var y=this.settings.standard===this.standards.loose?" Transitional":"",s=this.settings.standard===this.standards.loose?"loose":"strict";return`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01${y}//EN" "http://www.w3.org/TR/html4/${s}.dtd">`}getHead(){let y="",s="",d="";this.settings.extraHead&&this.settings.extraHead.replace(/([^,]+)/g,function(t){y+=t}),[].forEach.call(document.querySelectorAll("link"),function(t,i){t.href.indexOf(".css")>=0&&(s+='<link type="text/css" rel="stylesheet" href="'+t.href+'" >')});for(let t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].cssRules||document.styleSheets[t].rules){let i=document.styleSheets[t].cssRules||document.styleSheets[t].rules;for(let a=0;a<i.length;a++)try{d+=i[a].cssText}catch(c){}}return this.settings.extraCss&&this.settings.extraCss.replace(/([^,\s]+)/g,function(t){s+=`<link type="text/css" rel="stylesheet" href="${t}">`}),`<head><title>${this.settings.popTitle}</title>${y}${s}<style type="text/css">${d}</style></head>`}getBody(){let s=this.getFormData(document.querySelector(this.settings.el)).outerHTML;return console.log("htm",s),"<body>"+s+"</body>"}getFormData(y){let s=this,d=y.cloneNode(!0),t=d.querySelectorAll("*");[].forEach.call(t,function(u){let o=u.getAttribute("ignore-print");o=o==null?u.getAttribute("ignoreprint"):o,o!=null&&o.toString()==="true"&&(u.outerHTML="")});let i=d.querySelectorAll("input,select,textarea");[].forEach.call(i,function(u,o){let l=u.getAttribute("type"),r=i[o];l==null&&(l=u.tagName==="SELECT"?"select":u.tagName==="TEXTAREA"?"textarea":""),l==="radio"||l==="checkbox"?r.setAttribute("checked",u.checked):l==="select"?[].forEach.call(r.querySelectorAll("option"),function(n,p){n.selected&&n.setAttribute("selected",!0)}):l==="textarea"?r.innerHTML=u.value:(r.value=u.value,r.setAttribute("value",u.value))});var a=y.querySelectorAll("canvas"),c=d.querySelectorAll("canvas");return[].forEach.call(c,function(u,o){s.isECharts(u)&&(u.parentElement.style.width&&(u.parentElement.style.width="100%"),u.parentElement.parentElement.style.width&&(u.parentElement.parentElement.style.width="100%"));var l=a[o].toDataURL();u.outerHTML='<img src="'+l+'" style="width:100%;"/>'}),d}isECharts(y){let s="_echarts_instance_",d=y.parentElement;return d.getAttribute(s)!=null?!0:d.parentElement.getAttribute(s)!=null}getPrintWindow(){var y=this.Iframe();return{win:y.contentWindow||y,doc:y.doc}}Iframe(){let y=this.settings.id,s;var d=this;try{s=document.createElement("iframe"),document.body.appendChild(s),s.style.border="0px",s.style.position="absolute",s.style.width="0px",s.style.height="0px",s.style.right="0px",s.style.top="0px",s.setAttribute("id",y),s.setAttribute("src",new Date().getTime()),s.doc=null,s.onload=function(){var t=s.contentWindow||s;d.print(t)},s.doc=s.contentDocument?s.contentDocument:s.contentWindow?s.contentWindow.document:s.document}catch(t){throw new Error(t+". iframes may not be supported in this browser.")}if(s.doc==null)throw new Error("Cannot find document.");return s}}function D(g){if((g==null?void 0:g.type)==="html")x(g.printable);else return C(g)}function x(g){g?A(g):window.print()}let j=!0;function A(g){typeof g=="string"&&!g.startsWith("#")&&(g="#"+g),O(()=>{j&&(j=!1,new T({el:g,endCallback(){j=!0}}))})}export{D as printJS,x as printNb};
