var z=Object.defineProperty,G=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var F=(r,o,t)=>o in r?z(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t,k=(r,o)=>{for(var t in o||(o={}))O.call(o,t)&&F(r,t,o[t]);if(x)for(var t of x(o))W.call(o,t)&&F(r,t,o[t]);return r},y=(r,o)=>G(r,J(o));var w=(r,o,t)=>new Promise((f,p)=>{var c=a=>{try{s(t.next(a))}catch(u){p(u)}},_=a=>{try{s(t.throw(a))}catch(u){p(u)}},s=a=>a.done?f(a.value):Promise.resolve(a.value).then(c,_);s((t=t.apply(r,o)).next())});import Y from"./BasicTable.0a886d20.js";import{T as Z}from"./componentMap.fc77c2dc.js";import"./BasicTable.vue_vue_type_style_index_0_lang.fd294b48.js";import"./useTable.2733e6a7.js";import{a as d}from"./index.30a7fa2c.js";import"./index.d82ed84a.js";import{_ as ee}from"./RoleDrawer.vue_vue_type_script_setup_true_lang.cfc119eb.js";import{_ as oe}from"./RoleDesc.vue_vue_type_script_setup_true_lang.b8d0c82c.js";import te from"./RolePermissionDrawer.7fe4c3ab.js";import{_ as ne}from"./RoleIndexModal.vue_vue_type_script_setup_true_lang.d805d4cd.js";import{_ as re}from"./RoleUserTable.vue_vue_type_script_setup_true_lang.899bb7fc.js";import{c as ie,s as ae}from"./role.data.1b0a6ca9.js";import{p as le,g as se,a as ue,b as me,d as pe}from"./role.api.de376f46.js";import{useListPage as ce}from"./useListPage.148819a1.js";import{j as E,C as de,bI as I,r as m,s as v,t as fe,v as n,w as l,y as C,H as i,Q as _e,R as ge,ax as we}from"./index.d6323a8b.js";import"./useForm.c448380d.js";import"./BasicForm.vue_vue_type_style_index_0_lang.3b7179f6.js";import"./uniqBy.b473c125.js";import"./BasicModal.d35d2f99.js";import"./useWindowSizeFn.0b6b5a55.js";import"./useFormItem.3a0d2c3a.js";import"./JUpload.vue_vue_type_style_index_0_lang.a2ed25c2.js";import"./api.47fd90c6.js";import"./download.17d84636.js";import"./base64Conver.030fa32c.js";import"./index.51946d8c.js";import"./index.6450ecda.js";import"./useCountdown.5d182bba.js";import"./areaDataUtil.8b289fd7.js";import"./props.184f6ff3.js";import"./index.e9877282.js";import"./bem.40e6f864.js";import"./props.5cd8551a.js";import"./useContextMenu.d4034b7b.js";import"./index.53758bc7.js";import"./onMountedOrActivated.f230a25e.js";import"./depart.api.2cd5c45f.js";import"./index.56d246a9.js";import"./index.1430ee38.js";import"./useContentHeight.618fc37a.js";import"./useContentViewHeight.68b39758.js";import"./usePageContext.c54f47f4.js";import"./RedoOutlined.2aa4f93d.js";import"./index.dcfc8bdd.js";import"./RoleDataRuleDrawer.vue_vue_type_script_setup_true_lang.50384e53.js";import"./UserDrawer.vue_vue_type_script_setup_true_lang.b027dfa0.js";import"./user.data.ded38024.js";import"./user.api.2e174b62.js";import"./validator.c70dd823.js";import"./renderUtils.26796073.js";import"./useAdaptiveWidth.ec4c3ae5.js";import"./UseSelectModal.vue_vue_type_script_setup_true_lang.6cd62da3.js";const Ce=E({name:"system-role"}),Fo=E(y(k({},Ce),{setup(r){const o=de(!0),[t,{openDrawer:f}]=d(),[p,{openDrawer:c}]=d();I();const[_,{openModal:s}]=I(),[a,{openDrawer:u}]=d(),[B,{openDrawer:U}]=d(),{prefixCls:De,tableContext:S,onImportXls:be,onExportXls:he}=ce({designScope:"role-template",tableProps:{title:"\u7CFB\u7EDF\u89D2\u8272\u5217\u8868",api:le,columns:ie,formConfig:{schemas:ae},actionColumn:{width:120},rowSelection:null,defSort:{column:"id",order:"desc"}},exportConfig:{name:"\u89D2\u8272\u5217\u8868",url:se},importConfig:{url:ue}}),[T,{reload:g},{rowSelection:Re,selectedRowKeys:D}]=S;function A(){o.value=!0,c(!0,{isUpdate:!1})}function P(e){o.value=!0,c(!0,{record:e,isUpdate:!0})}function M(e){o.value=!1,U(!0,{record:e,isUpdate:!0})}function $(e){return w(this,null,function*(){yield pe({id:e.id},g)})}function N(){return w(this,null,function*(){yield me({ids:D.value},g)})}function V(e){u(!0,{roleId:e.id})}function H(e){s(!0,{roleCode:e})}function X(e){f(!0,e)}function j(e){return[{label:"\u7528\u6237",onClick:X.bind(null,e)},{label:"\u6388\u6743",onClick:V.bind(null,e)}]}function K(e){return[{label:"\u7F16\u8F91",onClick:P.bind(null,e)},{label:"\u8BE6\u60C5",onClick:M.bind(null,e)},{label:"\u5220\u9664",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:$.bind(null,e)}},{label:"\u9996\u9875\u914D\u7F6E",onClick:H.bind(null,e.roleCode)}]}return(e,xe)=>{const b=m("a-button"),h=m("Icon"),L=m("a-menu-item"),Q=m("a-menu"),q=m("a-dropdown");return v(),fe(we,null,[n(i(Y),{onRegister:i(T)},{tableTitle:l(()=>[n(b,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:A},{default:l(()=>[C(" \u65B0\u589E")]),_:1}),i(D).length>0?(v(),_e(q,{key:0},{overlay:l(()=>[n(Q,null,{default:l(()=>[n(L,{key:"1",onClick:N},{default:l(()=>[n(h,{icon:"ant-design:delete-outlined"}),C(" \u5220\u9664 ")]),_:1})]),_:1})]),default:l(()=>[n(b,null,{default:l(()=>[C("\u6279\u91CF\u64CD\u4F5C "),n(h,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):ge("",!0)]),action:l(({record:R})=>[n(i(Z),{actions:j(R),dropDownActions:K(R)},null,8,["actions","dropDownActions"])]),_:1},8,["onRegister"]),n(re,{onRegister:i(t)},null,8,["onRegister"]),n(ee,{onRegister:i(p),onSuccess:i(g),showFooter:o.value},null,8,["onRegister","onSuccess","showFooter"]),n(oe,{onRegister:i(B)},null,8,["onRegister"]),n(te,{onRegister:i(a)},null,8,["onRegister"]),n(ne,{onRegister:i(_)},null,8,["onRegister"])],64)}}}));export{Fo as default};
