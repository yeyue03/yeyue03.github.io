var c=(u,e,r)=>new Promise((t,o)=>{var n=s=>{try{a(r.next(s))}catch(i){o(i)}},F=s=>{try{a(r.throw(s))}catch(i){o(i)}},a=s=>s.done?t(s.value):Promise.resolve(s.value).then(n,F);a((r=r.apply(u,e)).next())});import{a1 as m}from"./index.d6323a8b.js";import{d as f}from"./user.api.2e174b62.js";const P={rule(u,e){if(u==="email")return this.email(e);if(u==="phone")return this.phone(e)},email(u){return[{required:u||!1,validator:(e,r)=>c(this,null,function*(){return u==!0&&!r?Promise.reject("\u8BF7\u8F93\u5165\u90AE\u7BB1!"):r&&!new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(r)?Promise.reject("\u8BF7\u8F93\u5165\u6B63\u786E\u90AE\u7BB1\u683C\u5F0F!"):Promise.resolve()}),trigger:"change"}]},phone(u){return[{required:u,validator:(e,r)=>c(this,null,function*(){return u&&!r?Promise.reject("\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u78011!"):/^1[3456789]\d{9}$/.test(r)?Promise.resolve():Promise.reject("\u624B\u673A\u53F7\u7801\u683C\u5F0F\u6709\u8BEF")}),trigger:"change"}]},startTime(u,e){return[{required:e||!1,validator:(r,t)=>e&&!t?Promise.reject("\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4"):u&&t&&m(u).isBefore(t)?Promise.reject("\u5F00\u59CB\u65F6\u95F4\u9700\u5C0F\u4E8E\u7ED3\u675F\u65F6\u95F4"):Promise.resolve(),trigger:"change"}]},endTime(u,e){return[{required:e||!1,validator:(r,t)=>e&&!t?Promise.reject("\u8BF7\u9009\u62E9\u7ED3\u675F\u65F6\u95F4"):u&&t&&m(t).isBefore(u)?Promise.reject("\u7ED3\u675F\u65F6\u95F4\u9700\u5927\u4E8E\u5F00\u59CB\u65F6\u95F4"):Promise.resolve(),trigger:"change"}]},confirmPassword(u,e){return[{required:e||!1,validator:(r,t)=>t?t!==u.password?Promise.reject("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4!"):Promise.resolve():Promise.reject("\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A")}]},duplicateCheckRule(u,e,r,t,o){return[{validator:(n,F)=>!F&&o?Promise.reject(`\u8BF7\u8F93\u5165${t.label}`):new Promise((a,s)=>{f({tableName:u,fieldName:e,fieldVal:F,dataId:r.id}).then(i=>{i.success?a():s(i.message||"\u6821\u9A8C\u5931\u8D25")}).catch(i=>{s(i.message||"\u9A8C\u8BC1\u5931\u8D25")})})}]}};function C(u,e,r,t){return c(this,null,function*(){try{const n=yield f({tableName:u,fieldName:e,fieldVal:r,dataId:t});return n.success?Promise.resolve():Promise.reject(n.message||"\u6821\u9A8C\u5931\u8D25")}catch(o){return Promise.reject("\u6821\u9A8C\u5931\u8D25,\u53EF\u80FD\u662F\u65AD\u7F51\u7B49\u95EE\u9898\u5BFC\u81F4\u7684\u6821\u9A8C\u5931\u8D25")}})}export{C as duplicateValidate,P as rules};
