var L=(e,u,n)=>new Promise((m,i)=>{var l=t=>{try{s(n.next(t))}catch(y){i(y)}},o=t=>{try{s(n.throw(t))}catch(y){i(y)}},s=t=>t.done?m(t.value):Promise.resolve(t.value).then(l,o);s((n=n.apply(e,u)).next())});import{Z as q,ej as M,j as Q,m as $,r as B,s as r,Q as f,w as p,v as j,y as F,z as k,R as w,H as E,C as G,a2 as D,ek as X,h as b,t as K,x as N,el as O,ax as P,u as Y,q as ee}from"./index.d6323a8b.js";const U={getEnabledType:"/sys/thirdApp/getEnabledType",wechatEnterprise:{user:"/sys/thirdApp/sync/wechatEnterprise/user",depart:"/sys/thirdApp/sync/wechatEnterprise/depart"},dingtalk:{user:"/sys/thirdApp/sync/dingtalk/user",depart:"/sys/thirdApp/sync/dingtalk/depart"}};let S=null;const ne=()=>L(void 0,null,function*(){if(S!=null)return M(S);{const{success:e,result:u}=yield q.get({url:U.getEnabledType},{isTransformResponse:!1});if(e)return S=M(u),u;console.warn("getEnabledType\u67E5\u8BE2\u5931\u8D25\uFF1A")}return{}}),V=Q({__name:"JThirdAppDropdown",props:{type:String,name:String,syncToApp:Boolean,syncToLocal:Boolean},emits:["to-app","to-local"],setup(e,{emit:u}){const n=e,m=$(()=>n.type==="wechatEnterprise"?!1:n.syncToLocal);function i(l){u(l.key,{type:n.type})}return(l,o)=>{const s=B("a-button"),t=B("a-menu-item"),y=B("a-menu"),C=B("a-dropdown");return e.syncToApp&&e.syncToLocal?(r(),f(C,{key:0},{overlay:p(()=>[j(y,{onClick:i},{default:p(()=>[e.syncToApp?(r(),f(t,{key:"to-app"},{default:p(()=>[F("\u540C\u6B65\u5230"+k(e.name),1)]),_:1})):w("",!0),E(m)?(r(),f(t,{key:"to-local"},{default:p(()=>[F("\u540C\u6B65\u5230\u672C\u5730")]),_:1})):w("",!0)]),_:1})]),default:p(()=>[j(s,{type:"primary",preIcon:"ant-design:sync-outlined"},{default:p(()=>[F("\u540C\u6B65"+k(e.name),1)]),_:1})]),_:1})):e.syncToApp?(r(),f(s,{key:1,type:"primary",preIcon:"ant-design:sync-outlined",onClick:o[0]||(o[0]=A=>i({key:"to-app"}))},{default:p(()=>[F("\u540C\u6B65"+k(e.name),1)]),_:1})):(r(),f(s,{key:2,type:"primary",preIcon:"ant-design:sync-outlined",onClick:o[1]||(o[1]=A=>i({key:"to-local"}))},{default:p(()=>[F("\u540C\u6B65"+k(e.name)+"\u5230\u672C\u5730",1)]),_:1}))}}}),te=Q({__name:"JThirdAppButton",props:{bizType:{type:String,required:!0},syncToApp:Boolean,syncToLocal:Boolean,selectedRowKeys:Array},emits:["sync-ok","sync-error","sync-finally"],setup(e,{emit:u}){const n=e,{createMessage:m,createWarningModal:i}=Y(),l=G({}),o=$(()=>({syncToApp:n.syncToApp,syncToLocal:n.syncToLocal})),s=$(()=>({"to-app":t,"to-local":y}));function t(a){A(a.type,"/toApp")}function y(a){A(a.type,"/toLocal")}function C(){return L(this,null,function*(){l.value=yield ne()})}function A(a,d){let h=U[a];if(!(h&&h[n.bizType])){console.warn("\u914D\u7F6E\u51FA\u9519");return}let W=h[n.bizType]+d,T=n.selectedRowKeys,R="\u786E\u5B9A\u8981\u5F00\u59CB\u540C\u6B65\u5168\u90E8\u6570\u636E\u5417\uFF1F\u53EF\u80FD\u82B1\u8D39\u8F83\u957F\u65F6\u95F4\uFF01";return Array.isArray(T)&&T.length>0?R=`\u786E\u5B9A\u8981\u5F00\u59CB\u540C\u6B65\u8FD9 ${T.length} \u9879\u5417\uFF1F`:T=[],new Promise((z,ue)=>{const H=D.confirm({icon:j(X),title:"\u540C\u6B65",content:R,onOk:()=>{H.update({keyboard:!1,okText:"\u540C\u6B65\u4E2D\u2026",cancelButtonProps:{disabled:!0}});let Z={ids:T.join(",")};return q.get({url:W,params:Z},{isTransformResponse:!1}).then(c=>{let g={};c.result&&(g={width:600,title:c.message,content:()=>{let _,J=["\u6210\u529F\u4FE1\u606F\u5982\u4E0B\uFF1A",I(b,c.result.successInfo.map((x,v)=>`${v+1}. ${x}`).join(`
`))];return c.success?_=[...J,b("br"),"\u65E0\u5931\u8D25\u4FE1\u606F\uFF01"]:_=["\u5931\u8D25\u4FE1\u606F\u5982\u4E0B\uFF1A",I(b,c.result.failInfo.map((x,v)=>`${v+1}. ${x}`).join(`
`)),b("br"),...J],_}}),c.success?(g!=null?D.success(g):m.warning(c.message),u("sync-ok")):(g!=null?D.warning(g):m.warning(c.message),u("sync-error"))}).catch(()=>H.destroy()).finally(()=>{z(),u("sync-finally",{type:a,direction:d,isToApp:d==="/toApp",isToLocal:d==="/toLocal"})})},onCancel(){z()}})})}function I(a,d){return a("div",{id:"box",style:{minHeight:"100px",border:"1px solid #d9d9d9",fontSize:"14px",maxHeight:"250px",whiteSpace:"pre",overflow:"auto",padding:"10px"}},d)}return C(),(a,d)=>e.syncToApp||e.syncToLocal?(r(),K(P,{key:0},[l.value.wechatEnterprise?(r(),f(V,N({key:0,type:"wechatEnterprise",name:"\u4F01\u5FAE"},E(o),O(E(s))),null,16)):w("",!0),l.value.dingtalk?(r(),f(V,N({key:1,type:"dingtalk",name:"\u9489\u9489"},E(o),O(E(s))),null,16)):w("",!0)],64)):(r(),K(P,{key:1},[F("\u672A\u8BBE\u7F6E\u4EFB\u4F55\u540C\u6B65\u65B9\u5411")],64))}});const ae=ee(te,[["__scopeId","data-v-dfd2b7af"]]);export{ae as J};
