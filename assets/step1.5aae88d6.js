var I=(e,t,s)=>new Promise((c,m)=>{var i=o=>{try{n(s.next(o))}catch(a){m(a)}},u=o=>{try{n(s.throw(o))}catch(a){m(a)}},n=o=>o.done?c(o.value):Promise.resolve(o.value).then(i,u);n((s=s.apply(e,t)).next())});import{j as h,cL as v,a6 as b,aB as B,o as S,dR as w,C as k,dS as R,a7 as _,dT as D,ab as z,dc as A,dU as E,u as V,dV as L,q as N,r as p,s as T,Q as $,w as l,v as r,y as F,z as U}from"./index.d6323a8b.js";import{C as M}from"./index.6450ecda.js";import"./useCountdown.5d182bba.js";import"./useFormItem.3a0d2c3a.js";const O=h({name:"Step1",components:{Button:v,Form:b,FormItem:b.Item,Input:B,CountdownInput:M},emits:["nextStep"],setup(e,{emit:t}){const{t:s}=S(),{handleBackLogin:c}=w(),{notification:m}=V(),i=k(),{validForm:u}=L(i),{getFormRules:n}=R(),o=k(!1),a=_({mobile:"",sms:""});function C(){return I(this,null,function*(){const f=yield u();if(!f)return;const g=yield D(z({phone:f.mobile,smscode:f.sms}));if(g.success){let y={username:g.result.username,phone:f.mobile,smscode:g.result.smscode};t("nextStep",y)}else m.error({message:s("sys.api.errorTip"),description:g.message||s("sys.api.networkExceptionMsg"),duration:3})})}function d(){return A({mobile:a.mobile,smsmode:E.FORGET_PASSWORD})}return{t:s,formRef:i,formData:a,getFormRules:n,handleNext:C,loading:o,handleBackLogin:c,sendCodeApi:d}}});function j(e,t,s,c,m,i){const u=p("Input"),n=p("FormItem"),o=p("CountdownInput"),a=p("Button"),C=p("Form");return T(),$(C,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef"},{default:l(()=>[r(n,{name:"mobile",class:"enter-x"},{default:l(()=>[r(u,{size:"large",value:e.formData.mobile,"onUpdate:value":t[0]||(t[0]=d=>e.formData.mobile=d),placeholder:e.t("sys.login.mobile")},null,8,["value","placeholder"])]),_:1}),r(n,{name:"sms",class:"enter-x"},{default:l(()=>[r(o,{size:"large",value:e.formData.sms,"onUpdate:value":t[1]||(t[1]=d=>e.formData.sms=d),placeholder:e.t("sys.login.smsCode"),sendCodeApi:e.sendCodeApi},null,8,["value","placeholder","sendCodeApi"])]),_:1}),r(n,{class:"enter-x"},{default:l(()=>[r(a,{type:"primary",size:"large",block:"",onClick:e.handleNext,loading:e.loading},{default:l(()=>[F(" \u4E0B\u4E00\u6B65 ")]),_:1},8,["onClick","loading"]),r(a,{size:"large",block:"",class:"mt-4",onClick:e.handleBackLogin},{default:l(()=>[F(U(e.t("sys.login.backSignIn")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])}const W=N(O,[["render",j]]);export{W as default};
