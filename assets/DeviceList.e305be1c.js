var N=Object.defineProperty,H=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var C=(i,e,o)=>e in i?N(i,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[e]=o,F=(i,e)=>{for(var o in e||(e={}))V.call(e,o)&&C(i,o,e[o]);if(D)for(var o of D(e))O.call(e,o)&&C(i,o,e[o]);return i},y=(i,e)=>H(i,I(e));var d=(i,e,o)=>new Promise((f,c)=>{var b=n=>{try{r(o.next(n))}catch(u){c(u)}},w=n=>{try{r(o.throw(n))}catch(u){c(u)}},r=n=>n.done?f(n.value):Promise.resolve(n.value).then(b,w);r((o=o.apply(i,e)).next())});import P from"./BasicTable.0a886d20.js";import{T as U}from"./componentMap.fc77c2dc.js";import"./BasicTable.vue_vue_type_style_index_0_lang.fd294b48.js";import"./useTable.2733e6a7.js";import"./index.d82ed84a.js";import{useListPage as j}from"./useListPage.148819a1.js";import{c as K,s as Q,T as W}from"./DeviceModal.d92bdc4d.js";import $ from"./LinkModal.9659d1d6.js";import{l as q,d as G,a as J,b as X}from"./Device.api.43f940f3.js";import{downloadFile as Y}from"./renderUtils.26796073.js";import{g as Z}from"./Area.b2923c7a.js";import{j as A,bI as S,r as tt,s as g,t as T,v as m,w as s,y as _,H as l,aW as ot,z as et,Q as it}from"./index.d6323a8b.js";import"./useForm.c448380d.js";import"./BasicForm.vue_vue_type_style_index_0_lang.3b7179f6.js";import"./uniqBy.b473c125.js";import"./BasicModal.d35d2f99.js";import"./useWindowSizeFn.0b6b5a55.js";import"./useFormItem.3a0d2c3a.js";import"./JUpload.vue_vue_type_style_index_0_lang.a2ed25c2.js";import"./api.47fd90c6.js";import"./download.17d84636.js";import"./base64Conver.030fa32c.js";import"./index.51946d8c.js";import"./index.6450ecda.js";import"./useCountdown.5d182bba.js";import"./areaDataUtil.8b289fd7.js";import"./props.184f6ff3.js";import"./index.e9877282.js";import"./bem.40e6f864.js";import"./props.5cd8551a.js";import"./useContextMenu.d4034b7b.js";import"./index.53758bc7.js";import"./onMountedOrActivated.f230a25e.js";import"./depart.api.2cd5c45f.js";import"./index.56d246a9.js";import"./index.1430ee38.js";import"./useContentHeight.618fc37a.js";import"./useContentViewHeight.68b39758.js";import"./usePageContext.c54f47f4.js";import"./RedoOutlined.2aa4f93d.js";import"./LinkStep1.184f07c5.js";import"./data.efb22ccd.js";import"./LinkStep2.9f1550a4.js";import"./LinkStep3.9e1b23e6.js";const nt=["innerHTML"],at={key:0,style:{"font-size":"12px","font-style":"italic"}},lt=A({name:"oms-testDemo"}),Zt=A(y(F({},lt),{setup(i){const[e,{openModal:o}]=S(),[f,{openModal:c}]=S(),{tableContext:b}=j({tableProps:{title:"\u8BBE\u5907\u4FE1\u606F\u8868",api:q,columns:K,canResize:!1,formConfig:{schemas:Q,autoSubmitOnEnter:!0,showAdvancedButton:!0,fieldMapToNumber:[["age",["age_begin","age_end"]]],fieldMapToTime:[]},actionColumn:{width:120,fixed:"right"}}}),[w,{reload:r},{rowSelection:n,selectedRowKeys:u}]=b;function E(){c(!0,{})}function M(t){o(!0,{record:t,isUpdate:!0,showFooter:!0})}function B(t){o(!0,{record:t,isUpdate:!0,showFooter:!1})}function L(t){return d(this,null,function*(){yield G({id:t.id},h)})}function h(){(u.value=[])&&r()}function R(t){return[{label:"\u7F16\u8F91",onClick:M.bind(null,t)}]}function v(t){return d(this,null,function*(){let p={id:t.id};yield J(p),yield r()})}function x(t){return d(this,null,function*(){let p={id:t.id};yield X(p),yield r()})}function z(t){return[{label:"\u8FDE\u63A5",onClick:v.bind(null,t),ifShow:()=>!t.isLink},{label:"\u65AD\u5F00",popConfirm:{title:"\u662F\u5426\u65AD\u5F00",placement:"left",confirm:x.bind(null,t)},ifShow:()=>t.isLink},{label:"\u8BE6\u60C5",onClick:B.bind(null,t)},{label:"\u5220\u9664",ifShow:()=>!t.isLink,popConfirm:{title:"\u662F\u5426\u5220\u9664",placement:"left",confirm:L.bind(null,t)}}]}return(t,p)=>{const k=tt("a-button");return g(),T("div",null,[m(l(P),{onRegister:l(w),rowSelection:l(n)},{tableTitle:s(()=>[m(k,{type:"primary",onClick:E,preIcon:"ant-design:plus-outlined"},{default:s(()=>[_("\u8FDE\u63A5")]),_:1})]),action:s(({record:a})=>[m(l(U),{actions:R(a),dropDownActions:z(a)},null,8,["actions","dropDownActions"])]),htmlSlot:s(({text:a})=>[ot("div",{innerHTML:a},null,8,nt)]),pcaSlot:s(({text:a})=>[_(et(l(Z)(a)),1)]),fileSlot:s(({text:a})=>[a?(g(),it(k,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download-outlined",size:"small",onClick:rt=>l(Y)(a)},{default:s(()=>[_("\u4E0B\u8F7D")]),_:2},1032,["onClick"])):(g(),T("span",at,"\u65E0\u6587\u4EF6"))]),_:1},8,["onRegister","rowSelection"]),m(W,{onRegister:l(e),onSuccess:h},null,8,["onRegister"]),m($,{onRegister:l(f),onSuccess:h},null,8,["onRegister"])])}}}));export{Zt as default};
