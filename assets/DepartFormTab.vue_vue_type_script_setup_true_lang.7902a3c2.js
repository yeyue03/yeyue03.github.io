var T=Object.defineProperty;var h=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var w=(o,t,e)=>t in o?T(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,m=(o,t)=>{for(var e in t||(t={}))k.call(t,e)&&w(o,e,t[e]);if(h)for(var e of h(t))P.call(t,e)&&w(o,e,t[e]);return o};var i=(o,t,e)=>new Promise((c,l)=>{var n=s=>{try{r(e.next(s))}catch(u){l(u)}},d=s=>{try{r(e.throw(s))}catch(u){l(u)}},r=s=>s.done?c(s.value):Promise.resolve(s.value).then(n,d);r((e=e.apply(o,t)).next())});import{u as S,B as V}from"./useForm.c448380d.js";import"./componentMap.fc77c2dc.js";import{j as N,bj as R,C as f,m as A,X as E,E as y,H as _,r as F,s as U,Q as G,w as g,v,aW as D,y as j}from"./index.d6323a8b.js";import{b as H}from"./depart.api.2cd5c45f.js";import{u as M,o as B}from"./depart.data.ff6c9320.js";const Q={class:"j-box-bottom-button offset-20",style:{"margin-top":"30px"}},Y=N({__name:"DepartFormTab",props:{data:{type:Object,default:()=>({})},rootTreeData:{type:Array,default:()=>[]}},emits:["success"],setup(o,{emit:t}){const e=o;R("prefixCls");const c=f(!1),l=f(!0),n=f({}),[d,{resetFields:r,setFieldsValue:s,validate:u,updateSchema:p}]=S({schemas:M().basicFormSchema,showActionButtonGroup:!1}),b=A(()=>{var a;return(a=e==null?void 0:e.data)!=null&&a.parentId?B.child:B.root});E(()=>{p([{field:"parentId",componentProps:{disabled:!0}},{field:"orgCode",componentProps:{disabled:!0}}]),y(()=>e.data,()=>i(this,null,function*(){let a=_(e.data);typeof a!="object"&&(a={}),n.value=a,yield r(),yield s(m({},a))}),{deep:!0,immediate:!0}),y(()=>e.rootTreeData,()=>i(this,null,function*(){p([{field:"parentId",componentProps:{treeData:e.rootTreeData}}])}),{deep:!0,immediate:!0}),y(b,()=>i(this,null,function*(){p([{field:"orgCategory",componentProps:{options:b.value}}])}),{immediate:!0})});function x(){return i(this,null,function*(){yield r(),yield s(m({},n.value))})}function O(){return i(this,null,function*(){try{c.value=!0;let a=yield u();a=Object.assign({},n.value,a),yield H(a,l.value),t("success"),Object.assign(n.value,a)}finally{c.value=!1}})}return(a,W)=>{const C=F("a-button"),I=F("a-spin");return U(),G(I,{spinning:c.value},{default:g(()=>[v(_(V),{onRegister:_(d)},null,8,["onRegister"]),D("div",Q,[D("div",null,[v(C,{preIcon:"ant-design:sync-outlined",onClick:x},{default:g(()=>[j("\u91CD\u7F6E")]),_:1}),v(C,{type:"primary",preIcon:"ant-design:save-filled",onClick:O},{default:g(()=>[j("\u4FDD\u5B58")]),_:1})])])]),_:1},8,["spinning"])}}});export{Y as _};
