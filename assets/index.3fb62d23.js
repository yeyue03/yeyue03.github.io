var I=Object.defineProperty,N=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var M=(t,r,u)=>r in t?I(t,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[r]=u,R=(t,r)=>{for(var u in r||(r={}))Y.call(r,u)&&M(t,u,r[u]);if(y)for(var u of y(r))w.call(r,u)&&M(t,u,r[u]);return t},j=(t,r)=>N(t,z(r));import H from"./BasicTable.0a886d20.js";import"./componentMap.fc77c2dc.js";import"./BasicTable.vue_vue_type_style_index_0_lang.fd294b48.js";import{u as K}from"./useTable.2733e6a7.js";import{_ as L}from"./DiskInfo.vue_vue_type_script_setup_true_lang.bcbf6884.js";import{Z as e,j as k,C as p,X as Q,r as g,s as A,t as W,v as n,w as m,Q as _,R as b,H as l,aW as h,y as B,z as F,cG as J}from"./index.d6323a8b.js";import"./useForm.c448380d.js";import"./BasicForm.vue_vue_type_style_index_0_lang.3b7179f6.js";import"./uniqBy.b473c125.js";import"./index.d82ed84a.js";import"./BasicModal.d35d2f99.js";import"./useWindowSizeFn.0b6b5a55.js";import"./useFormItem.3a0d2c3a.js";import"./JUpload.vue_vue_type_style_index_0_lang.a2ed25c2.js";import"./api.47fd90c6.js";import"./download.17d84636.js";import"./base64Conver.030fa32c.js";import"./index.51946d8c.js";import"./index.6450ecda.js";import"./useCountdown.5d182bba.js";import"./areaDataUtil.8b289fd7.js";import"./props.184f6ff3.js";import"./index.e9877282.js";import"./bem.40e6f864.js";import"./props.5cd8551a.js";import"./useContextMenu.d4034b7b.js";import"./index.53758bc7.js";import"./onMountedOrActivated.f230a25e.js";import"./depart.api.2cd5c45f.js";import"./index.56d246a9.js";import"./index.1430ee38.js";import"./useContentHeight.618fc37a.js";import"./useContentViewHeight.68b39758.js";import"./usePageContext.c54f47f4.js";import"./RedoOutlined.2aa4f93d.js";import"./gauge.vue_vue_type_script_setup_true_lang.644b1e82.js";import"./useECharts.09396270.js";import"./echarts.89625759.js";import"./install.7b4b5b26.js";const X=()=>e.get({url:"/actuator/metrics/system.cpu.count"},{isTransformResponse:!1}),Z=()=>e.get({url:"/actuator/metrics/system.cpu.usage"},{isTransformResponse:!1}),$=()=>e.get({url:"/actuator/metrics/process.start.time"},{isTransformResponse:!1}),O=()=>e.get({url:"/actuator/metrics/process.uptime"},{isTransformResponse:!1}),ee=()=>e.get({url:"/actuator/metrics/process.cpu.usage"},{isTransformResponse:!1}),te=()=>e.get({url:"/actuator/metrics/jvm.memory.max"},{isTransformResponse:!1}),ue=()=>e.get({url:"/actuator/metrics/jvm.memory.committed"},{isTransformResponse:!1}),re=()=>e.get({url:"/actuator/metrics/jvm.memory.used"},{isTransformResponse:!1}),se=()=>e.get({url:"/actuator/metrics/jvm.buffer.memory.used"},{isTransformResponse:!1}),oe=()=>e.get({url:"/actuator/metrics/jvm.buffer.count"},{isTransformResponse:!1}),ae=()=>e.get({url:"/actuator/metrics/jvm.threads.daemon"},{isTransformResponse:!1}),ne=()=>e.get({url:"/actuator/metrics/jvm.threads.live"},{isTransformResponse:!1}),me=()=>e.get({url:"/actuator/metrics/jvm.threads.peak"},{isTransformResponse:!1}),ce=()=>e.get({url:"/actuator/metrics/jvm.classes.loaded"},{isTransformResponse:!1}),ie=()=>e.get({url:"/actuator/metrics/jvm.classes.unloaded"},{isTransformResponse:!1}),le=()=>e.get({url:"/actuator/metrics/jvm.gc.memory.allocated"},{isTransformResponse:!1}),pe=()=>e.get({url:"/actuator/metrics/jvm.gc.memory.promoted"},{isTransformResponse:!1}),fe=()=>e.get({url:"/actuator/metrics/jvm.gc.max.data.size"},{isTransformResponse:!1}),de=()=>e.get({url:"/actuator/metrics/jvm.gc.live.data.size"},{isTransformResponse:!1}),ve=()=>e.get({url:"/actuator/metrics/jvm.gc.pause"},{isTransformResponse:!1}),ge=()=>e.get({url:"/actuator/metrics/tomcat.sessions.created"},{isTransformResponse:!1}),Fe=()=>e.get({url:"/actuator/metrics/tomcat.sessions.expired"},{isTransformResponse:!1}),Be=()=>e.get({url:"/actuator/metrics/tomcat.sessions.active.current"},{isTransformResponse:!1}),xe=()=>e.get({url:"/actuator/metrics/tomcat.sessions.active.max"},{isTransformResponse:!1}),Ce=()=>e.get({url:"/actuator/metrics/tomcat.sessions.rejected"},{isTransformResponse:!1}),Ee=t=>{if(t=="1")return{};if(t=="2")return{"jvm.gc.pause":[".count",".totalTime"]};if(t=="3")return{"tomcat.global.request":[".count",".totalTime"],"tomcat.servlet.request":[".count",".totalTime"]}},Ae=t=>{if(t=="1")return{"system.cpu.count":{color:"green",text:"CPU \u6570\u91CF",unit:"\u6838"},"system.cpu.usage":{color:"green",text:"\u7CFB\u7EDF CPU \u4F7F\u7528\u7387",unit:"%",valueType:"Number"},"process.start.time":{color:"purple",text:"\u5E94\u7528\u542F\u52A8\u65F6\u95F4\u70B9",unit:"",valueType:"Date"},"process.uptime":{color:"purple",text:"\u5E94\u7528\u5DF2\u8FD0\u884C\u65F6\u95F4",unit:"\u79D2"},"process.cpu.usage":{color:"purple",text:"\u5F53\u524D\u5E94\u7528 CPU \u4F7F\u7528\u7387",unit:"%",valueType:"Number"}};if(t=="2")return{"jvm.memory.max":{color:"purple",text:"JVM \u6700\u5927\u5185\u5B58",unit:"MB",valueType:"RAM"},"jvm.memory.committed":{color:"purple",text:"JVM \u53EF\u7528\u5185\u5B58",unit:"MB",valueType:"RAM"},"jvm.memory.used":{color:"purple",text:"JVM \u5DF2\u7528\u5185\u5B58",unit:"MB",valueType:"RAM"},"jvm.buffer.memory.used":{color:"cyan",text:"JVM \u7F13\u51B2\u533A\u5DF2\u7528\u5185\u5B58",unit:"MB",valueType:"RAM"},"jvm.buffer.count":{color:"cyan",text:"\u5F53\u524D\u7F13\u51B2\u533A\u6570\u91CF",unit:"\u4E2A"},"jvm.threads.daemon":{color:"green",text:"JVM \u5B88\u62A4\u7EBF\u7A0B\u6570\u91CF",unit:"\u4E2A"},"jvm.threads.live":{color:"green",text:"JVM \u5F53\u524D\u6D3B\u8DC3\u7EBF\u7A0B\u6570\u91CF",unit:"\u4E2A"},"jvm.threads.peak":{color:"green",text:"JVM \u5CF0\u503C\u7EBF\u7A0B\u6570\u91CF",unit:"\u4E2A"},"jvm.classes.loaded":{color:"orange",text:"JVM \u5DF2\u52A0\u8F7D Class \u6570\u91CF",unit:"\u4E2A"},"jvm.classes.unloaded":{color:"orange",text:"JVM \u672A\u52A0\u8F7D Class \u6570\u91CF",unit:"\u4E2A"},"jvm.gc.memory.allocated":{color:"pink",text:"GC \u65F6, \u5E74\u8F7B\u4EE3\u5206\u914D\u7684\u5185\u5B58\u7A7A\u95F4",unit:"MB",valueType:"RAM"},"jvm.gc.memory.promoted":{color:"pink",text:"GC \u65F6, \u8001\u5E74\u4EE3\u5206\u914D\u7684\u5185\u5B58\u7A7A\u95F4",unit:"MB",valueType:"RAM"},"jvm.gc.max.data.size":{color:"pink",text:"GC \u65F6, \u8001\u5E74\u4EE3\u7684\u6700\u5927\u5185\u5B58\u7A7A\u95F4",unit:"MB",valueType:"RAM"},"jvm.gc.live.data.size":{color:"pink",text:"FullGC \u65F6, \u8001\u5E74\u4EE3\u7684\u5185\u5B58\u7A7A\u95F4",unit:"MB",valueType:"RAM"},"jvm.gc.pause.count":{color:"blue",text:"\u7CFB\u7EDF\u542F\u52A8\u4EE5\u6765GC \u6B21\u6570",unit:"\u6B21"},"jvm.gc.pause.totalTime":{color:"blue",text:"\u7CFB\u7EDF\u542F\u52A8\u4EE5\u6765GC \u603B\u8017\u65F6",unit:"\u79D2"}};if(t=="3")return{"tomcat.sessions.created":{color:"green",text:"tomcat \u5DF2\u521B\u5EFA session \u6570",unit:"\u4E2A"},"tomcat.sessions.expired":{color:"green",text:"tomcat \u5DF2\u8FC7\u671F session \u6570",unit:"\u4E2A"},"tomcat.sessions.active.current":{color:"green",text:"tomcat \u5F53\u524D\u6D3B\u8DC3 session \u6570",unit:"\u4E2A"},"tomcat.sessions.active.max":{color:"green",text:"tomcat \u6D3B\u8DC3 session \u6570\u5CF0\u503C",unit:"\u4E2A"},"tomcat.sessions.rejected":{color:"green",text:"\u8D85\u8FC7session \u6700\u5927\u914D\u7F6E\u540E\uFF0C\u62D2\u7EDD\u7684 session \u4E2A\u6570",unit:"\u4E2A"},"tomcat.global.sent":{color:"purple",text:"\u53D1\u9001\u7684\u5B57\u8282\u6570",unit:"bytes"},"tomcat.global.request.max":{color:"purple",text:"request \u8BF7\u6C42\u6700\u957F\u8017\u65F6",unit:"\u79D2"},"tomcat.global.request.count":{color:"purple",text:"\u5168\u5C40 request \u8BF7\u6C42\u6B21\u6570",unit:"\u6B21"},"tomcat.global.request.totalTime":{color:"purple",text:"\u5168\u5C40 request \u8BF7\u6C42\u603B\u8017\u65F6",unit:"\u79D2"},"tomcat.servlet.request.max":{color:"cyan",text:"servlet \u8BF7\u6C42\u6700\u957F\u8017\u65F6",unit:"\u79D2"},"tomcat.servlet.request.count":{color:"cyan",text:"servlet \u603B\u8BF7\u6C42\u6B21\u6570",unit:"\u6B21"},"tomcat.servlet.request.totalTime":{color:"cyan",text:"servlet \u8BF7\u6C42\u603B\u8017\u65F6",unit:"\u79D2"},"tomcat.threads.current":{color:"pink",text:"tomcat \u5F53\u524D\u7EBF\u7A0B\u6570\uFF08\u5305\u62EC\u5B88\u62A4\u7EBF\u7A0B\uFF09",unit:"\u4E2A"},"tomcat.threads.config.max":{color:"pink",text:"tomcat \u914D\u7F6E\u7684\u7EBF\u7A0B\u6700\u5927\u6570",unit:"\u4E2A"}}},De=t=>{if(t=="1")return Promise.all([X(),Z(),$(),O(),ee()]);if(t=="2")return Promise.all([te(),ue(),re(),oe(),se(),ae(),ne(),me(),ce(),ie(),de(),fe(),le(),pe(),ve()]);if(t=="3")return Promise.all([Be(),xe(),ge(),Fe(),Ce()])},Te=[{title:"\u53C2\u6570",dataIndex:"param",width:80,align:"left",slots:{customRender:"param"}},{title:"\u63CF\u8FF0",dataIndex:"text",slots:{customRender:"text"},width:80},{title:"\u5F53\u524D\u503C",dataIndex:"value",slots:{customRender:"value"},width:80}],ye={class:"p-4"},Me={slot:"message"},Re=k({name:"monitor-server"}),vt=k(j(R({},Re),{setup(t){const r=p([]),u=p("1"),D=p({}),T=p({});let f=p({});p([]);const S={logType:"1"},[V,{reload:je}]=K({columns:Te,showIndexColumn:!1,bordered:!0,pagination:!1,canResize:!1,tableSetting:{fullScreen:!0},rowKey:"id"});function G(s){s!=4&&x(s)}function x(s){T.value=J().format("YYYY\u5E74MM\u6708DD\u65E5 HH\u65F6mm\u5206ss\u79D2"),De(s).then(a=>{f.value=Ae(s),D.value=Ee(s);let c=[];a.forEach((d,C)=>{let v=l(D)[d.name];v instanceof Array||(v=[""]),v.forEach((E,o)=>{let i=d.name+E,q=U(d.measurements[o].value,l(f)[i].valueType);c.push({id:i+C,param:i,text:"false value",value:q})})}),r.value=c})}function P(){x(u.value)}function U(s,a){return a==="Number"?Number(s*100).toFixed(2):a==="Date"?J(s*1e3).format("YYYY-MM-DD HH:mm:ss"):a==="RAM"?Number(s/1048576).toFixed(3):s}return Q(()=>{x(u.value)}),(s,a)=>{const c=g("a-tab-pane"),d=g("a-tabs"),C=g("a-divider"),v=g("a-tag"),E=g("a-card");return A(),W("div",ye,[n(E,{bordered:!1,style:{height:"100%"}},{default:m(()=>[n(d,{activeKey:u.value,"onUpdate:activeKey":a[0]||(a[0]=o=>u.value=o),onChange:G},{default:m(()=>[n(c,{key:"1",tab:"\u670D\u52A1\u5668\u4FE1\u606F"}),n(c,{key:"2",tab:"JVM\u4FE1\u606F","force-render":""}),n(c,{key:"3",tab:"Tomcat\u4FE1\u606F"}),n(c,{key:"4",tab:"\u78C1\u76D8\u76D1\u63A7"},{default:m(()=>[u.value==4?(A(),_(L,{key:0,style:{height:"100%"}})):b("",!0)]),_:1})]),_:1},8,["activeKey"]),u.value!=4?(A(),_(l(H),{key:0,onRegister:l(V),searchInfo:S,dataSource:r.value},{tableTitle:m(()=>[h("div",Me,[B("\u4E0A\u6B21\u66F4\u65B0\u65F6\u95F4\uFF1A"+F(T.value)+" ",1),n(C,{type:"vertical"}),h("a",{onClick:P},"\u7ACB\u5373\u66F4\u65B0")])]),param:m(({record:o,text:i})=>[n(v,{color:l(f)[o.param].color},{default:m(()=>[B(F(i),1)]),_:2},1032,["color"])]),text:m(({record:o})=>[B(F(l(f)[o.param].text),1)]),value:m(({record:o,text:i})=>[B(F(i)+" "+F(l(f)[o.param].unit),1)]),_:1},8,["onRegister","dataSource"])):b("",!0)]),_:1})])}}}));export{vt as default};
