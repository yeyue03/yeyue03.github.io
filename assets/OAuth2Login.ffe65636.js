import{j as f,C as a,eh as u,dB as h,b5 as k,dQ as v,cN as m,o as A,s as y,t as _,u as L}from"./index.d6323a8b.js";const E=f({__name:"OAuth2Login",setup(T){const c=a(u()),e=a({thirdApp:!1,wxWork:!1,dingtalk:!1}),{currentRoute:l}=h(),s=l.value;u()||k.replace({path:v.BASE_LOGIN,query:s.query}),c.value&&g();function g(){/wxwork/i.test(navigator.userAgent)&&(e.value.thirdApp=!0,e.value.wxWork=!0),/dingtalk/i.test(navigator.userAgent)&&(e.value.thirdApp=!0,e.value.dingtalk=!0),p()}function p(){if(e.value.thirdApp&&s.query.oauth2LoginToken){let n=s.query.oauth2LoginToken;d({token:n,thirdType:s.query.thirdType})}}function d(n){const r=m(),{notification:i}=L(),{t:o}=A();r.ThirdLogin(n).then(t=>{t&&t.userInfo?i.success({message:o("sys.login.loginSuccessTitle"),description:`${o("sys.login.loginSuccessDesc")}: ${t.userInfo.realname}`,duration:3}):i.error({message:o("sys.login.errorTip"),description:((t.response||{}).data||{}).message||t.message||o("sys.login.networkExceptionMsg"),duration:4})})}return(n,r)=>(y(),_("div"))}});export{E as default};
