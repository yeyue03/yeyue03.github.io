var K=Object.defineProperty;var E=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var z=(e,a,p)=>a in e?K(e,a,{enumerable:!0,configurable:!0,writable:!0,value:p}):e[a]=p,D=(e,a)=>{for(var p in a||(a={}))X.call(a,p)&&z(e,p,a[p]);if(E)for(var p of E(a))Y.call(a,p)&&z(e,p,a[p]);return e};import{j as Z,o as x,b8 as _,a7 as U,E as ee,m as k,bj as ae,C as te,M as ne,q as se,r as B,aV as oe,s as u,t as f,aW as l,z as r,ax as A,N as w,Q as T,w as M,v as j,y as R,V as ie,B as $,R as le,dm as ue,dn as re}from"./index.d6323a8b.js";const pe=Z({name:"PanelCoordinateAxis",props:{canvasWidth:{type:Number,default:()=>205},canvasHeight:{type:Number,default:()=>110},axisObj:{type:Object,default:()=>({})}},emits:["changePanel"],setup(e,{emit:a}){const{t:p}=x(),{canvasWidth:v,canvasHeight:d,axisObj:V}=_(e),n=U(D({},V.value));ee(V,s=>{Object.assign(n,s)},{deep:!0});const C=U({temperature:"\u2103",humidity:"%rh",beam:"lx"}),y=k(()=>{if(n.valueType=="constant"){const s=Math.floor(n.duration/60);let m=n.duration%60;return m=m<10?"0"+m:m,s+"h:"+m+"m"}else return p("device.settings.wait")+" "+n.powerSize}),S=ae("changeDeviceObj",{}),h=k(()=>{var m,g,I;let s=1;return n.panelType=="temperature"?s=(m=S.value)==null?void 0:m.temperatureStart:n.panelType=="humidity"?s=(g=S.value)==null?void 0:g.humidityStart:n.panelType=="beam"&&(s=(I=S.value)==null?void 0:I.beamStart),s||1}),o=k(()=>{var m,g,I;let s=100;return n.panelType=="temperature"?s=(m=S.value)==null?void 0:m.temperatureEnd:n.panelType=="humidity"?s=(g=S.value)==null?void 0:g.humidityEnd:n.panelType=="beam"&&(s=(I=S.value)==null?void 0:I.beanEnd),s||100}),F=k(()=>{let s=!1;return(n.panelType=="temperature"||n.panelType=="humidity")&&(s=n.panelType==n.standardType||n.standardType=="both"),s}),P=te();let t=null;const b=10,i=10,q=Math.floor(v.value/b)+1,H=Math.floor(d.value/b)-1;ne(()=>{t=P.value.getContext("2d"),t.width=v.value,t.height=d.value,O()});const O=()=>{t.clearRect(0,0,v.value,d.value),t.beginPath(),t.lineWidth=1,t.strokeStyle="#777";for(let s=2;s<q;s++)t.beginPath(),t.moveTo(s*b,b),t.lineTo(s*b,d.value-i),t.stroke();for(let s=2;s<H;s++)t.beginPath(),t.moveTo(b,s*b),t.lineTo(v.value,s*b),t.stroke();t.strokeStyle="#fff",t.lineWidth=2,t.beginPath(),t.moveTo(i,d.value-i),t.lineTo(v.value-i,d.value-i),t.stroke(),t.beginPath(),t.moveTo(i,i),t.lineTo(i,d.value-i),t.stroke(),t.fillStyle="#fff",t.moveTo(v.value-i,d.value-i-5),t.lineTo(v.value-i,d.value-i+5),t.lineTo(v.value-i+10,d.value-i),t.closePath(),t.fill(),t.moveTo(i-5,i),t.lineTo(i+5,i),t.lineTo(i,i-10),t.closePath(),t.fill(),t.beginPath(),t.moveTo(i,d.value-i-n.startValue),t.lineTo(v.value,d.value-i-n.endValue),t.strokeStyle="#0080FF",t.stroke()},N=()=>{n.valueType=="constant"&&(n.startValue=n.endValue),O(),c()},L=()=>{n.isShowTimeInput=!n.isShowTimeInput,n.isShowTimeInput||c()},Q=s=>{n[s]=!n[s],n[s]||N()},G=()=>{n.isShowBand=!n.isShowBand,c()},J=s=>{n[s]=!n[s],n[s]||c()},c=()=>{a("changePanel",n)};return{t:p,canvasRef:P,formState:n,panelTypeSymboObj:C,durationConvertStr:y,canvasStyle:{width:v.value+"px",height:d.value+"px","border-color":"#f5f5f5"},valueMax:o,valueMin:h,switchDisabled:F,changeValue:N,showTimeInput:L,showValueInput:Q,showBand:G,showBandInput:J,changeAxis:c}},directives:{focus:{mounted:e=>e.querySelector("input").focus()}}});const W=e=>(ue("data-v-1acab74a"),e=e(),re(),e),de={class:"axis-wrap"},ve={class:"tag-box"},me={class:"tag-span"},fe={class:"icon-float"},Se={class:"tag-box"},he={key:1,class:"tag-span"},be={key:0,class:"band-box"},ye={class:"tag-box"},we={class:"tag-span"},Te={class:"band-span"},ce=W(()=>l("span",{class:"max-span"},"max: ",-1)),ge=W(()=>l("span",{class:"max-span"},"min: ",-1)),Ie={class:"tag-box"};function ke(e,a,p,v,d,V){const n=B("a-select-option"),C=B("a-select"),y=B("a-input-number"),S=B("a-switch"),h=oe("focus");return u(),f("div",{class:$({board:!0,"band-board":e.formState.isShowBand})},[l("div",de,[l("div",ve,[l("span",me,r(e.t("device.settings.section"))+" "+r(e.formState.serialNumber),1),e.formState.isShowTimeInput?(u(),f(A,{key:1},[e.formState.valueType=="range"?w((u(),T(C,{key:0,value:e.formState.powerSize,"onUpdate:value":a[1]||(a[1]=o=>e.formState.powerSize=o),onChange:e.showTimeInput,onBlur:e.showTimeInput},{default:M(()=>[j(n,{value:"1"},{default:M(()=>[R(r(e.t("device.settings.wait01")),1)]),_:1}),j(n,{value:"2"},{default:M(()=>[R(r(e.t("device.settings.wait02")),1)]),_:1})]),_:1},8,["value","onChange","onBlur"])),[[h]]):w((u(),T(y,{key:1,class:"tag-span",min:1,max:1440,step:.1,precision:1,value:e.formState.duration,"onUpdate:value":a[2]||(a[2]=o=>e.formState.duration=o),onBlur:e.showTimeInput},null,8,["step","value","onBlur"])),[[h]])],64)):(u(),f("span",{key:0,class:"tag-span",onClick:a[0]||(a[0]=(...o)=>e.showTimeInput&&e.showTimeInput(...o))},r(e.durationConvertStr),1))]),l("div",{class:"canvas-box",style:ie(e.canvasStyle)},[l("canvas",{ref:"canvasRef"},r(e.t("device.settings.notSupportCanvas")),513),l("div",fe,[l("i",{class:$(`iconfont ${e.formState.icon}`)},null,2)])],4),l("div",Se,[e.formState.isShowStartValInput?w((u(),T(y,{key:1,class:"tag-span",min:e.valueMin,max:e.valueMax,step:.1,precision:1,value:e.formState.startValue,"onUpdate:value":a[4]||(a[4]=o=>e.formState.startValue=o),onBlur:a[5]||(a[5]=o=>e.showValueInput("isShowStartValInput"))},null,8,["min","max","step","value"])),[[h]]):(u(),f(A,{key:0},[e.formState.valueType=="range"?(u(),f("span",{key:0,class:"tag-span",onClick:a[3]||(a[3]=o=>e.showValueInput("isShowStartValInput"))},r(e.formState.startValue)+" "+r(e.panelTypeSymboObj[e.formState.panelType]),1)):(u(),f("span",he))],64)),e.formState.isShowEndValInput?w((u(),T(y,{key:3,class:"tag-span",min:e.valueMin,max:e.valueMax,step:.1,precision:1,value:e.formState.endValue,"onUpdate:value":a[7]||(a[7]=o=>e.formState.endValue=o),onBlur:a[8]||(a[8]=o=>e.showValueInput("isShowEndValInput"))},null,8,["min","max","step","value"])),[[h]]):(u(),f("span",{key:2,class:"tag-span",onClick:a[6]||(a[6]=o=>e.showValueInput("isShowEndValInput"))},r(e.formState.endValue)+" "+r(e.panelTypeSymboObj[e.formState.panelType]),1))])]),l("div",{class:"arrow-box",onClick:a[9]||(a[9]=(...o)=>e.showBand&&e.showBand(...o))},[l("i",{class:$(`iconfont ${e.formState.isShowBand?"icon-zuojiantou":"icon-youjiantou"}`)},null,2)]),e.formState.isShowBand?(u(),f("div",be,[l("div",ye,[l("span",we,r(e.t("device.settings.band")),1)]),l("div",Te,[l("div",null,[ce,e.formState.isShowMaxBandInput?w((u(),T(y,{key:1,class:"tag-input",min:0,max:100,step:.1,precision:1,value:e.formState.bandMax,"onUpdate:value":a[11]||(a[11]=o=>e.formState.bandMax=o),onBlur:a[12]||(a[12]=o=>e.showBandInput("isShowMaxBandInput"))},null,8,["step","value"])),[[h]]):(u(),f("span",{key:0,onClick:a[10]||(a[10]=o=>e.showBandInput("isShowMaxBandInput"))},r(e.formState.bandMax)+" "+r(e.panelTypeSymboObj[e.formState.panelType]),1))]),l("div",null,[ge,e.formState.isShowMinBandInput?w((u(),T(y,{key:1,class:"tag-input",min:-100,max:0,step:.1,precision:1,value:e.formState.bandMin,"onUpdate:value":a[14]||(a[14]=o=>e.formState.bandMin=o),onBlur:a[15]||(a[15]=o=>e.showBandInput("isShowMinBandInput"))},null,8,["step","value"])),[[h]]):(u(),f("span",{key:0,onClick:a[13]||(a[13]=o=>e.showBandInput("isShowMinBandInput"))},r(e.formState.bandMin)+" "+r(e.panelTypeSymboObj[e.formState.panelType]),1))])]),l("div",Ie,[l("span",null,r(e.t("device.settings.switch")),1),j(S,{checked:e.formState.switch,"onUpdate:checked":a[16]||(a[16]=o=>e.formState.switch=o),onChange:e.changeAxis,disabled:e.switchDisabled},null,8,["checked","onChange","disabled"])])])):le("",!0)],2)}const Ce=se(pe,[["render",ke],["__scopeId","data-v-1acab74a"]]);export{Ce as default};
