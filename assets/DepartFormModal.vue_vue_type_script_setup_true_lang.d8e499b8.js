var M=Object.defineProperty;var y=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var w=(r,o,e)=>o in r?M(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,C=(r,o)=>{for(var e in o||(o={}))j.call(o,e)&&w(r,e,o[e]);if(y)for(var e of y(o))D.call(o,e)&&w(r,e,o[e]);return r};var d=(r,o,e)=>new Promise((l,p)=>{var u=t=>{try{n(e.next(t))}catch(c){p(c)}},f=t=>{try{n(e.throw(t))}catch(c){p(c)}},n=t=>t.done?l(t.value):Promise.resolve(t.value).then(u,f);n((e=e.apply(r,o)).next())});import{u as k,B as x}from"./useForm.c448380d.js";import"./componentMap.fc77c2dc.js";import{j as P,bj as R,C as F,m as S,bH as U,H as a,s as A,Q as H,w as I,v as L,x as T}from"./index.d6323a8b.js";import{B as V}from"./index.d82ed84a.js";import{b as E}from"./depart.api.2cd5c45f.js";import{u as G,o as v}from"./depart.data.ff6c9320.js";const W=P({__name:"DepartFormModal",props:{rootTreeData:{type:Array,default:()=>[]}},emits:["success","register"],setup(r,{emit:o}){const e=r;R("prefixCls");const l=F(!1),p=F({}),u=S(()=>l.value?"\u7F16\u8F91":"\u65B0\u589E"),[f,{resetFields:n,setFieldsValue:t,validate:c,updateSchema:B}]=k({schemas:G().basicFormSchema,showActionButtonGroup:!1}),[b,{setModalProps:g,closeModal:O}]=U(s=>d(this,null,function*(){yield n(),l.value=a(s==null?void 0:s.isUpdate);let m=a(s==null?void 0:s.isChild),h=m?v.child:v.root;B([{field:"parentId",show:m,componentProps:{disabled:m,treeData:e.rootTreeData}},{field:"orgCode",show:!1},{field:"orgCategory",componentProps:{options:h}}]);let i=a(s==null?void 0:s.record);typeof i!="object"&&(i={}),i=Object.assign({departOrder:0,orgCategory:h[0].value},i),p.value=i,yield t(C({},i))}));function _(){return d(this,null,function*(){try{g({confirmLoading:!0});let s=yield c();yield E(s,l.value),O(),o("success")}finally{g({confirmLoading:!1})}})}return(s,m)=>(A(),H(a(V),T({title:a(u),width:800},s.$attrs,{onOk:_,onRegister:a(b)}),{default:I(()=>[L(a(x),{onRegister:a(f)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});export{W as _};
