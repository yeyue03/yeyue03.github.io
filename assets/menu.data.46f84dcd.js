import{Z as l,a2 as p,h as c,I as m}from"./index.d6323a8b.js";import{render as F}from"./renderUtils.26796073.js";const y=u=>l.get({url:"/sys/permission/list",params:u}),w=(u,e)=>l.delete({url:"/sys/permission/delete",params:u},{joinParamsToUrl:!0}).then(()=>{e()}),S=(u,e)=>{p.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u6570\u636E",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:()=>l.delete({url:"/sys/permission/deleteBatch",data:u},{joinParamsToUrl:!0}).then(()=>{e()})})},I=(u,e)=>{const t=e?"/sys/permission/edit":"/sys/permission/add";return l.post({url:t,params:u})},P=u=>l.get({url:"/sys/permission/queryPermissionRule",params:u}),T=(u,e)=>{const t=e?"/sys/permission/editPermissionRule":"/sys/permission/addPermissionRule";return l.post({url:t,params:u})},k=(u,e)=>l.delete({url:"/sys/permission/deletePermissionRule",params:u},{joinParamsToUrl:!0}).then(()=>{e()}),h=u=>l.get({url:`/sys/dict/getDictItems/${u.code}`}),f=u=>l.get({url:"/sys/permission/checkPermDuplication",params:u},{isTransformResponse:!1}),E=(u,e,t)=>[{validator:(r,a)=>!a&&t?Promise.reject(`\u8BF7\u8F93\u5165${e.label}`):new Promise((i,s)=>{f({id:u.id,url:u.url,alwaysShow:u.alwaysShow}).then(o=>{o.success?i():s(o.message||"\u6821\u9A8C\u5931\u8D25")}).catch(o=>{s(o.message||"\u9A8C\u8BC1\u5931\u8D25")})})}],d=u=>u===0,C=u=>u===1,n=u=>u===2;var D=(u=>(u.Default="layouts/default/index",u.IFrame="sys/iframe/FrameBlank",u))(D||{});const A=[{title:"\u83DC\u5355\u540D\u79F0",dataIndex:"name",width:200,align:"left"},{title:"\u83DC\u5355\u7C7B\u578B",dataIndex:"menuType",width:150,customRender:({text:u})=>F.renderDict(u,"menu_type")},{title:"\u56FE\u6807",dataIndex:"icon",width:50,customRender:({record:u})=>c(m,{icon:u.icon})},{title:"\u7EC4\u4EF6",dataIndex:"component",align:"left",width:150},{title:"\u8DEF\u5F84",dataIndex:"url",align:"left",width:150},{title:"\u6392\u5E8F",dataIndex:"sortNo",width:50}],R=[{field:"name",label:"\u83DC\u5355\u540D\u79F0",component:"Input",colProps:{span:8}}],g=[{label:"id",field:"id",component:"Input",show:!1},{field:"menuType",label:"\u83DC\u5355\u7C7B\u578B",component:"RadioButtonGroup",defaultValue:0,componentProps:({formActionType:u,formModel:e})=>({options:[{label:"\u4E00\u7EA7\u83DC\u5355",value:0},{label:"\u5B50\u83DC\u5355",value:1},{label:"\u6309\u94AE/\u6743\u9650",value:2}],onChange:t=>{const{updateSchema:r,clearValidate:a}=u,i=n(t)?"\u6309\u94AE/\u6743\u9650":"\u83DC\u5355\u540D\u79F0";a(),r([{field:"name",label:i},{field:"url",required:!n(t)}]),C(t)&&!e.id&&e.component=="layouts/RouteView"&&(e.component="")}})},{field:"name",label:"\u83DC\u5355\u540D\u79F0",component:"Input",required:!0},{field:"parentId",label:"\u4E0A\u7EA7\u83DC\u5355",component:"TreeSelect",required:!0,componentProps:{replaceFields:{title:"name",key:"id",value:"id"},dropdownStyle:{maxHeight:"50vh"},getPopupContainer:u=>u.parentNode},ifShow:({values:u})=>!d(u.menuType)},{field:"url",label:"\u8BBF\u95EE\u8DEF\u5F84",component:"Input",required:!0,ifShow:({values:u})=>!(u.component==="sys/iframe/FrameBlank"&&u.internalOrExternal)&&u.menuType!==2,dynamicRules:({model:u,schema:e})=>E(u,e,!0)},{field:"component",label:"\u524D\u7AEF\u7EC4\u4EF6",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u524D\u7AEF\u7EC4\u4EF6"},defaultValue:"layouts/RouteView",required:!0,ifShow:({values:u})=>!n(u.menuType)},{field:"componentName",label:"\u7EC4\u4EF6\u540D\u79F0",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u540D\u79F0"},helpMessage:["\u6B64\u5904\u540D\u79F0\u5E94\u548Cvue\u7EC4\u4EF6\u7684name\u5C5E\u6027\u4FDD\u6301\u4E00\u81F4\u3002","\u7EC4\u4EF6\u540D\u79F0\u4E0D\u80FD\u91CD\u590D\uFF0C\u4E3B\u8981\u7528\u4E8E\u8DEF\u7531\u7F13\u5B58\u529F\u80FD\u3002","\u5982\u679C\u7EC4\u4EF6\u540D\u79F0\u548Cvue\u7EC4\u4EF6\u7684name\u5C5E\u6027\u4E0D\u4E00\u81F4\uFF0C\u5219\u4F1A\u5BFC\u81F4\u8DEF\u7531\u7F13\u5B58\u5931\u6548\u3002","\u975E\u5FC5\u586B\uFF0C\u7559\u7A7A\u5219\u4F1A\u6839\u636E\u8BBF\u95EE\u8DEF\u5F84\u81EA\u52A8\u751F\u6210\u3002"],defaultValue:"",ifShow:({values:u})=>!n(u.menuType)},{field:"frameSrc",label:"Iframe\u5730\u5740",component:"Input",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Iframe\u5730\u5740"},{type:"url",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684url\u5730\u5740"}],ifShow:({values:u})=>!n(u.menuType)&&u.component==="sys/iframe/FrameBlank"},{field:"redirect",label:"\u9ED8\u8BA4\u8DF3\u8F6C\u5730\u5740",component:"Input",ifShow:({values:u})=>d(u.menuType)},{field:"perms",label:"\u6388\u6743\u6807\u8BC6",component:"Input",ifShow:({values:u})=>n(u.menuType)},{field:"permsType",label:"\u6388\u6743\u7B56\u7565",component:"RadioGroup",defaultValue:"1",helpMessage:["\u53EF\u89C1/\u53EF\u8BBF\u95EE(\u6388\u6743\u540E\u53EF\u89C1/\u53EF\u8BBF\u95EE)","\u53EF\u7F16\u8F91(\u672A\u6388\u6743\u65F6\u7981\u7528)"],componentProps:{options:[{label:"\u53EF\u89C1/\u53EF\u8BBF\u95EE",value:"1"},{label:"\u53EF\u7F16\u8F91",value:"2"}]},ifShow:({values:u})=>n(u.menuType)},{field:"status",label:"\u72B6\u6001",component:"RadioGroup",defaultValue:"1",componentProps:{options:[{label:"\u6709\u6548",value:"1"},{label:"\u65E0\u6548",value:"0"}]},ifShow:({values:u})=>n(u.menuType)},{field:"icon",label:"\u83DC\u5355\u56FE\u6807",component:"IconPicker",ifShow:({values:u})=>!n(u.menuType)},{field:"sortNo",label:"\u6392\u5E8F",component:"InputNumber",defaultValue:1,ifShow:({values:u})=>!n(u.menuType)},{field:"route",label:"\u662F\u5426\u8DEF\u7531\u83DC\u5355",component:"Switch",defaultValue:!0,componentProps:{checkedChildren:"\u662F",unCheckedChildren:"\u5426"},ifShow:({values:u})=>!n(u.menuType)},{field:"hidden",label:"\u9690\u85CF\u8DEF\u7531",component:"Switch",defaultValue:0,componentProps:{checkedChildren:"\u662F",unCheckedChildren:"\u5426"},ifShow:({values:u})=>!n(u.menuType)},{field:"hideTab",label:"\u9690\u85CFTab",component:"Switch",defaultValue:0,componentProps:{checkedChildren:"\u662F",unCheckedChildren:"\u5426"},ifShow:({values:u})=>!n(u.menuType)},{field:"keepAlive",label:"\u662F\u5426\u7F13\u5B58\u8DEF\u7531",component:"Switch",defaultValue:!1,componentProps:{checkedChildren:"\u662F",unCheckedChildren:"\u5426"},ifShow:({values:u})=>!n(u.menuType)},{field:"alwaysShow",label:"\u805A\u5408\u8DEF\u7531",component:"Switch",defaultValue:!1,componentProps:{checkedChildren:"\u662F",unCheckedChildren:"\u5426"},ifShow:({values:u})=>!n(u.menuType)},{field:"internalOrExternal",label:"\u6253\u5F00\u65B9\u5F0F",component:"Switch",defaultValue:!1,componentProps:{checkedChildren:"\u5916\u90E8",unCheckedChildren:"\u5185\u90E8"},ifShow:({values:u})=>!n(u.menuType)}],V=[{title:"\u89C4\u5219\u540D\u79F0",dataIndex:"ruleName",width:150},{title:"\u89C4\u5219\u5B57\u6BB5",dataIndex:"ruleColumn",width:100},{title:"\u89C4\u5219\u503C",dataIndex:"ruleValue",width:100}],x=[{field:"ruleName",label:"\u89C4\u5219\u540D\u79F0",component:"Input",colProps:{span:6}},{field:"ruleValue",label:"\u89C4\u5219\u503C",component:"Input",colProps:{span:6}}],v=[{label:"id",field:"id",component:"Input",show:!1},{field:"ruleName",label:"\u89C4\u5219\u540D\u79F0",component:"Input",required:!0},{field:"ruleColumn",label:"\u89C4\u5219\u5B57\u6BB5",component:"Input",ifShow:({values:u})=>u.ruleConditions!=="USE_SQL_RULES"},{field:"ruleConditions",label:"\u6761\u4EF6\u89C4\u5219",required:!0,component:"ApiSelect",componentProps:{api:h,params:{code:"rule_conditions"},labelField:"text",valueField:"value",getPopupContainer:u=>document.body}},{field:"ruleValue",label:"\u89C4\u5219\u503C",component:"Input",required:!0},{field:"status",label:"\u72B6\u6001",component:"RadioButtonGroup",defaultValue:"1",componentProps:{options:[{label:"\u65E0\u6548",value:"0"},{label:"\u6709\u6548",value:"1"}]}}];export{D as C,V as a,x as b,k as c,P as d,v as e,g as f,I as g,A as h,R as i,S as j,w as k,y as l,T as s};
