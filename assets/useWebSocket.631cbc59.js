import{n as s,dl as r,H as l}from"./index.d6323a8b.js";let o;const t=new Map;function k(e){const u=s()||"";if(o=r(e,{autoReconnect:{retries:10,delay:5e3},heartbeat:{message:"ping",interval:55e3},protocols:[u]}),o){o.open=a,o.close=f;const n=l(o.ws);n!=null&&(n.onerror=i,n.onmessage=F)}}function a(){console.log("[WebSocket] \u8FDE\u63A5\u6210\u529F")}function f(e){console.log("[WebSocket] \u8FDE\u63A5\u65AD\u5F00\uFF1A",e)}function i(e){console.log("[WebSocket] \u8FDE\u63A5\u53D1\u751F\u9519\u8BEF: ",e)}function F(e){console.debug("[WebSocket] -----\u63A5\u6536\u6D88\u606F-------",e.data);try{const u=JSON.parse(e.data);for(const n of t.keys())try{n(u)}catch(c){console.error(c)}}catch(u){console.error("[WebSocket] data\u89E3\u6790\u5931\u8D25\uFF1A",u)}}function D(e){t.has(e)||(typeof e=="function"?t.set(e,null):console.debug("[WebSocket] \u6DFB\u52A0 WebSocket \u6D88\u606F\u76D1\u542C\u5931\u8D25\uFF1A\u4F20\u5165\u7684\u53C2\u6570\u4E0D\u662F\u4E00\u4E2A\u65B9\u6CD5"))}function S(e){t.delete(e)}function W(){return o}export{k as connectWebSocket,S as offWebSocket,D as onWebSocket,W as useMyWebSocket};
