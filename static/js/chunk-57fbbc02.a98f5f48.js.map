{"version":3,"sources":["webpack:///./src/views/project/charts/control/index.vue?9789","webpack:///./src/views/project/charts/control/index.vue","webpack:///./src/views/project/charts/control/index.vue?6967","webpack:///./src/views/project/charts/control/CoordinateAxis.vue","webpack:///./src/views/project/charts/control/CoordinateAxis.vue?ba9c","webpack:///./src/views/project/charts/control/CoordinateAxis.vue?d7c4","webpack:///./src/views/project/charts/control/index.vue?b899","webpack:///./node_modules/mitt/dist/mitt.mjs","webpack:///./src/utils/mitt.js","webpack:///./src/views/project/charts/control/CoordinateAxis.vue?782a","webpack:///./src/views/project/charts/control/index.vue?f81a","webpack:///./src/views/project/charts/control/CoordinateAxis.vue?6bb3"],"names":["class","_createElementVNode","_hoisted_5","_hoisted_8","_hoisted_1","style","_normalizeStyle","_ctx","scaleStyle","rowWidth","_createElementBlock","_Fragment","_renderList","controlObj","list","key","onDrop","$event","rowDropEvent","onDragover","_cache","args","dragoverEvent","_normalizeClass","item","index","id","draggable","onDragstart","boardDragStart","onClick","deleteAxis","_createVNode","_component_CoordinateAxis","axisObj","onChangeAxis","changeAxis","_hoisted_7","deleteDropEvent","defineComponent","name","components","CoordinateAxis","setup","reactive","temperature","humidity","e","controlType","preventDefault","optionItem","dataTransfer","getData","JSON","parse","message","warning","startValue","endValue","valueType","newIndex","length","push","Math","random","icon","duration","mitt","emit","setRowWidth","setData","stringify","boardObj","splice","childObj","Object","assign","ref","maxLen","value","scaleObj","width","height","scale","computed","transform","on","type","__exports__","render","_hoisted_2","_hoisted_3","_toDisplayString","formState","isShowTimeInput","_createBlock","_component_a_input_number","min","max","step","precision","autofocus","onBlur","showTimeInput","durationConvertStr","canvasStyle","_hoisted_4","_hoisted_6","onChange","changeValue","props","canvasWidth","Number","default","canvasHeight","emits","toRefs","hour","floor","minute","canvasRef","ctx","gridSpace","axisSpace","xLineNumber","yLineNumber","nextTick","getContext","setCanvas","clearRect","beginPath","lineWidth","strokeStyle","i","moveTo","lineTo","stroke","fillStyle","closePath","fill","content","__esModule","module","locals","exports","add","___CSS_LOADER_API_IMPORT___","all","n","Map","t","get","set","off","indexOf","slice","map"],"mappings":"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","file":"static/js/chunk-57fbbc02.a98f5f48.js","sourcesContent":["export * from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--11-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../../../node_modules/less-loader/index.js??ref--11-oneOf-1-4!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=513c7db6&lang=less&scoped=true\"","<template>\r\n  <div class=\"scale-wrap\">\r\n    <div class=\"scale-box\" :style=\"scaleStyle\">\r\n      <div class=\"control-box\" :style=\"`width: ${rowWidth}`\">\r\n        <template v-for=\"(list, key) in controlObj\" :key=\"key\">\r\n          <div class=\"control-row\" @drop=\"rowDropEvent($event, key)\" @dragover=\"dragoverEvent\">\r\n            <i :class=\"`iconfont ${key == 'temperature' ? 'icon-wendu' : 'icon-shidu'}`\"></i>\r\n\r\n            <template v-for=\"(item, index) in list\" :key=\"item.id\">\r\n              <div class=\"board\" draggable=\"true\" @dragstart=\"boardDragStart($event, key, index)\">\r\n                <div class=\"cha-btn\" @click=\"deleteAxis(key, index)\">\r\n                  <i class=\"iconfont icon-cha\"></i>\r\n                </div>\r\n                <CoordinateAxis :axisObj=\"item\" @changeAxis=\"changeAxis($event, item)\" />\r\n              </div>\r\n            </template>\r\n\r\n            <div class=\"bg-row\">\r\n              <div class=\"gray-block\"></div>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"delete-btn\" @drop=\"deleteDropEvent\" @dragover=\"dragoverEvent\">\r\n    <i class=\"iconfont icon-shanchu\"></i>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, defineComponent, reactive, computed } from 'vue';\r\nimport { message } from 'ant-design-vue';\r\nimport CoordinateAxis from './CoordinateAxis.vue';\r\nimport mitt from \"@/utils/mitt.js\";\r\n\r\nexport default defineComponent({\r\n  name: 'ControlRoom',\r\n  components: {\r\n    CoordinateAxis\r\n  },\r\n  setup() {\r\n    const controlObj = reactive({\r\n      temperature: [],\r\n      humidity: [],\r\n    })\r\n    \r\n    // 拖拽释放事件 controlType: 所在面板类型\r\n    const rowDropEvent = (e, controlType) => {\r\n      e.preventDefault();\r\n      let optionItem = e.dataTransfer.getData(\"optionItem\"); // 按钮类型\r\n      if (!optionItem) {\r\n        return\r\n      }\r\n\r\n      optionItem = JSON.parse(optionItem);\r\n      if (controlType != optionItem.controlType) {\r\n        return message.warning('请选择对应类型按钮');\r\n      }\r\n\r\n      let startValue = 10;\r\n      let endValue = 20;\r\n      if (optionItem.valueType == 'constant') {\r\n        endValue = 10;\r\n      }\r\n\r\n      let newIndex = controlObj[controlType].length + 1;\r\n      newIndex = newIndex < 10 ? '0' + newIndex : newIndex;\r\n\r\n      controlObj[controlType].push({\r\n        id: Math.random(),\r\n        icon: optionItem.icon,\r\n        duration: 70,\r\n        startValue,\r\n        endValue,\r\n        valueType: optionItem.valueType,\r\n        index: newIndex,\r\n      })\r\n\r\n      mitt.emit('changeControlObj', controlObj);\r\n      setRowWidth();\r\n    }\r\n\r\n    const dragoverEvent = e => {\r\n      e.preventDefault();\r\n    }\r\n\r\n    const boardDragStart = (e, key, index) => {\r\n      e.dataTransfer.setData(\"boardObj\", JSON.stringify({ key, index }));\r\n    };\r\n\r\n    // board 拖拽到删除icon 处时触发删除事件\r\n    const deleteDropEvent = e => {\r\n      e.preventDefault();\r\n      let boardObj = e.dataTransfer.getData(\"boardObj\"); // 按钮类型\r\n      if (!boardObj) {\r\n        return\r\n      }\r\n\r\n      boardObj = JSON.parse(boardObj);\r\n      deleteAxis(boardObj.key, boardObj.index);\r\n    }\r\n\r\n    const deleteAxis = (controlType, index) => {\r\n      controlObj[controlType].splice(index, 1);\r\n      mitt.emit('changeControlObj', controlObj);\r\n      setRowWidth();\r\n    }\r\n\r\n    // 子组件值变更后同步变更父组件的值\r\n    const changeAxis = (childObj, item) => {\r\n      Object.assign(item, childObj);\r\n      mitt.emit('changeControlObj', controlObj);\r\n    }\r\n\r\n    const rowWidth = ref('500px');\r\n    const setRowWidth = () => {\r\n      let maxLen = controlObj['temperature'].length;\r\n      if (maxLen < controlObj['humidity'].length) {\r\n        maxLen = controlObj['humidity'].length;\r\n      }\r\n\r\n      rowWidth.value = (80 + maxLen * 250 + 300) + 'px';\r\n    }\r\n\r\n    const scaleObj = reactive({\r\n      width: 100,\r\n      height: 100,\r\n      scale: 1\r\n    })\r\n    const scaleStyle = computed(() => {\r\n      return {\r\n        width: `${scaleObj.width}%`,\r\n        height: `${scaleObj.height}%`,\r\n        transform: `scale(${scaleObj.scale})`,\r\n      }\r\n    })\r\n    mitt.on('scaleOption', (type) => {\r\n      if (type == 'amplify') { // 放大\r\n        scaleObj.width *= 0.8;\r\n        scaleObj.height *= 0.8;\r\n        scaleObj.scale *= 1.25;\r\n\r\n      } else if (type == 'reduce') { // 缩小\r\n        scaleObj.width = scaleObj.width >= 100 ? 100 : scaleObj.width * 1.25;\r\n        scaleObj.height = scaleObj.height >= 100 ? 100 : scaleObj.height * 1.25;\r\n        scaleObj.scale *= 0.8;\r\n\r\n      } else if (type == 'restore') { // 还原\r\n        scaleObj.width = 100;\r\n        scaleObj.height = 100;\r\n        scaleObj.scale = 1;\r\n      }\r\n    })\r\n    \r\n    return {\r\n      rowWidth,\r\n      controlObj,\r\n      scaleStyle,\r\n      rowDropEvent,\r\n      boardDragStart,\r\n      deleteDropEvent,\r\n      dragoverEvent,\r\n      deleteAxis,\r\n      changeAxis\r\n    }\r\n  },\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.scale-wrap {\r\n  width: 100%;\r\n  padding: 90px 0 50px;\r\n}\r\n.scale-box {\r\n  transform-origin: left top;\r\n  padding: 0 0 10px;\r\n}\r\n.control-box {\r\n  min-width: 100%;\r\n}\r\n.control-row {\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  height: 214px;\r\n  margin: 25px 0;\r\n\r\n  & > .iconfont {\r\n    z-index: 2;\r\n    width: 40px;\r\n    height: 50px;\r\n    margin-right: 40px;\r\n    font-size: 30px;\r\n    text-align: center;\r\n    color: #f00;\r\n    border: solid 1px #eee;\r\n    border-left: none;\r\n    background: #333;\r\n    box-sizing: border-box;\r\n    box-shadow: 2px 2px 10px 3px #333;\r\n    border-radius: 3px;\r\n  }\r\n  .icon-shidu {\r\n    color: skyblue;\r\n  }\r\n\r\n  .board {\r\n    width: 210px;\r\n    overflow: hidden;\r\n    position: relative;\r\n    z-index: 2;\r\n    margin: 0 20px;\r\n    border: solid 3px transparent;\r\n    box-shadow: 2px 2px 5px 1px #333;\r\n    border-radius: 5px;\r\n    background-clip: padding-box;\r\n    background-clip: padding-box, border-box;\r\n    background-origin: padding-box, border-box;\r\n    background-image: linear-gradient(to right, #fff, #fff), linear-gradient(to right, #ddd, #999);\r\n  }\r\n  .cha-btn {\r\n    display: none;\r\n    position: absolute;\r\n    top: -6px;\r\n    right: -6px;\r\n    width: 20px;\r\n    height: 20px;\r\n    border-radius: 50%;\r\n    background: #999;\r\n    cursor: pointer;\r\n\r\n    .iconfont {\r\n      position: relative;\r\n      display: block;\r\n      left: 1px;\r\n      top: 2px;\r\n      font-size: 12px;\r\n      transform: scale(.6);\r\n      -moz-transform: scale(.6);\r\n      -webkit-transform: scale(.6);\r\n      -o-transform: scale(.6);\r\n    }\r\n  }\r\n  .board:hover .cha-btn {\r\n    display: block;\r\n  }\r\n}\r\n.bg-row {\r\n  z-index: 1;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 214px;\r\n\r\n  .gray-block {\r\n    width: 100%;\r\n    height: 40px;\r\n    background: #ccc;\r\n  }\r\n}\r\n\r\n.delete-btn {\r\n  position: absolute;\r\n  bottom: 25px;\r\n  right: 25px;\r\n  width: 60px;\r\n  height: 60px;\r\n  line-height: 60px;\r\n  text-align: center;\r\n  .iconfont {\r\n    font-size: 50px;\r\n    color: #fff;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=513c7db6&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=513c7db6&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\Git\\\\study-package\\\\vue-study\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-513c7db6\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"axis-wrap\">\r\n    <div class=\"tag-box\">\r\n      <span class=\"tag-span\">Ramp {{ formState.index }}</span>\r\n      <span v-if=\"!formState.isShowTimeInput\" class=\"tag-span\" @click=\"showTimeInput\">{{ durationConvertStr }}</span>\r\n      <a-input-number v-else class=\"tag-span\" :min=\"1\" :max=\"1440\" :step=\"1\" :precision=\"0\" :autofocus=\"true\" v-model:value=\"formState.duration\" @blur=\"showTimeInput\" />\r\n    </div>\r\n\r\n    <div class=\"canvas-box\" :style=\"canvasStyle\">\r\n      <canvas ref=\"canvasRef\">\r\n        您的浏览器不支持canvas\r\n      </canvas>\r\n\r\n      <div class=\"icon-float\">\r\n        <i :class=\"`iconfont ${formState.icon}`\"></i>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"tag-box\">\r\n      <span class=\"tag-span\">{{ formState.startValue }}</span>\r\n      <a-input-number class=\"tag-span\" :min=\"1\" :max=\"70\" :step=\"1\" :precision=\"0\" v-model:value=\"formState.endValue\" @change=\"changeValue\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, defineComponent, nextTick, reactive, toRefs, computed } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"CoordinateAxis\",\r\n  props: {\r\n    canvasWidth: {\r\n      type: Number,\r\n      default: () => {\r\n        return 205;\r\n      }\r\n    },\r\n    canvasHeight: {\r\n      type: Number,\r\n      default: () => {\r\n        return 110;\r\n      }\r\n    },\r\n    axisObj: {\r\n      type: Object,\r\n      default: () => {\r\n        return {};\r\n      }\r\n    },\r\n  },\r\n  emits: ['changeAxis'],\r\n  setup(props, { emit }) {\r\n    const { canvasWidth, canvasHeight, axisObj } = toRefs(props); // 获取画布的宽、高\r\n\r\n    const formState = reactive({\r\n      ...axisObj.value\r\n    });\r\n\r\n    const durationConvertStr = computed(() => {\r\n      const hour = Math.floor(formState.duration / 60);\r\n      let minute = formState.duration % 60;\r\n      minute = minute < 10 ? '0' + minute : minute;\r\n      return hour + 'h:' + minute + 'm';\r\n    })\r\n\r\n    const canvasRef = ref();\r\n    let ctx = null;\r\n    const gridSpace = 10; // 网格线间隔 px\r\n    const axisSpace = 10; // 坐标轴留白 px\r\n    const xLineNumber = Math.floor(canvasWidth.value / gridSpace) + 1; // 计算需要几条竖线\r\n    const yLineNumber = Math.floor(canvasHeight.value / gridSpace) - 1; // 计算需要几条横线\r\n\r\n    nextTick(() => {\r\n      ctx = canvasRef.value.getContext(\"2d\");\r\n      // ctx.canvas.style.width = canvasWidth.value + 'px';\r\n      // ctx.canvas.style.height = canvasHeight.value + 'px';\r\n      ctx.width = canvasWidth.value;\r\n      ctx.height = canvasHeight.value;\r\n      setCanvas();\r\n    });\r\n\r\n    const setCanvas = () => {\r\n      ctx.clearRect(0, 0, canvasWidth.value, canvasHeight.value);\r\n      \r\n      ctx.beginPath();\r\n      ctx.lineWidth = 1;\r\n      ctx.strokeStyle = \"#777\";\r\n      for (let i = 2; i < xLineNumber; i++) {\r\n        // 循环画竖线 边界不要线，所以i从2开始\r\n        ctx.beginPath();\r\n        ctx.moveTo(i * gridSpace, gridSpace);\r\n        ctx.lineTo(i * gridSpace, canvasHeight.value - axisSpace);\r\n        ctx.stroke();\r\n      }\r\n      for (let i = 2; i < yLineNumber; i++) {\r\n        // 循环画横线\r\n        ctx.beginPath();\r\n        ctx.moveTo(gridSpace, i * gridSpace);\r\n        ctx.lineTo(canvasWidth.value, i * gridSpace);\r\n        ctx.stroke();\r\n      }\r\n\r\n      ctx.strokeStyle = \"#fff\";\r\n      ctx.lineWidth = 2;\r\n      // 绘制X轴\r\n      ctx.beginPath();\r\n      ctx.moveTo(axisSpace, canvasHeight.value - axisSpace);\r\n      ctx.lineTo(canvasWidth.value - axisSpace, canvasHeight.value - axisSpace);\r\n      ctx.stroke();\r\n\r\n      // 绘制Y轴\r\n      ctx.beginPath();\r\n      ctx.moveTo(axisSpace, axisSpace);\r\n      ctx.lineTo(axisSpace, canvasHeight.value - axisSpace);\r\n      ctx.stroke();\r\n\r\n      // 绘制X轴的箭头\r\n      ctx.fillStyle = '#fff'\r\n      ctx.moveTo(canvasWidth.value - axisSpace, canvasHeight.value - axisSpace - 5);\r\n      ctx.lineTo(canvasWidth.value - axisSpace, canvasHeight.value - axisSpace + 5);\r\n      ctx.lineTo(canvasWidth.value - axisSpace + 10, canvasHeight.value - axisSpace);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n\r\n      // 绘制Y轴箭头\r\n      ctx.moveTo(axisSpace - 5, axisSpace);\r\n      ctx.lineTo(axisSpace + 5, axisSpace);\r\n      ctx.lineTo(axisSpace, axisSpace - 10);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n\r\n      // 绘制直线\r\n      ctx.beginPath();\r\n      ctx.moveTo(axisSpace, canvasHeight.value - axisSpace - formState.startValue);\r\n      ctx.lineTo(canvasWidth.value, canvasHeight.value - axisSpace - formState.endValue);\r\n      ctx.strokeStyle = \"#0080FF\";\r\n      ctx.stroke();\r\n    };\r\n\r\n    const changeValue = () => {\r\n      if (formState.valueType == 'constant') {\r\n        formState.startValue = formState.endValue;\r\n      }\r\n      setCanvas();\r\n      changeAxis();\r\n    };\r\n\r\n    // 是否显示时间段输入框\r\n    const showTimeInput = () => {\r\n      formState.isShowTimeInput = !formState.isShowTimeInput;\r\n      changeAxis();\r\n    }\r\n\r\n    const changeAxis = () => {\r\n      emit('changeAxis', formState);\r\n    }\r\n\r\n    return {\r\n      canvasRef,\r\n      formState,\r\n      durationConvertStr,\r\n      canvasStyle: {\r\n        width: canvasWidth.value + 'px',\r\n        height: canvasHeight.value + 'px',\r\n        'border-color': '#f5f5f5'\r\n      },\r\n      changeValue,\r\n      showTimeInput,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"less\" scopede>\r\n.axis-wrap {\r\n  width: 210px;\r\n  padding: 0 5px 0 0;\r\n  background: #333;\r\n}\r\n.canvas-box {\r\n  position: relative;\r\n  width: 220px;\r\n  height: 230px;\r\n}\r\n.icon-float {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  .iconfont {\r\n    font-size: 45px;\r\n    color: red;\r\n  }\r\n  .icon-shidu {\r\n    color: skyblue;\r\n  }\r\n}\r\n.tag-box {\r\n  width: 100%;\r\n  height: 52px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n\r\n  .tag-span {\r\n    width: 80px;\r\n    text-align: center;\r\n  }\r\n  .ant-input-number-input {\r\n    text-align: center;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./CoordinateAxis.vue?vue&type=template&id=0fe5aaef\"\nimport script from \"./CoordinateAxis.vue?vue&type=script&lang=js\"\nexport * from \"./CoordinateAxis.vue?vue&type=script&lang=js\"\n\nimport \"./CoordinateAxis.vue?vue&type=style&index=0&id=0fe5aaef&lang=less&scopede=true\"\n\nimport exportComponent from \"D:\\\\Git\\\\study-package\\\\vue-study\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../../../node_modules/less-loader/index.js??ref--11-oneOf-1-4!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./CoordinateAxis.vue?vue&type=style&index=0&id=0fe5aaef&lang=less&scopede=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"51215d78\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".scale-wrap[data-v-513c7db6]{width:100%;padding:90px 0 50px}.scale-box[data-v-513c7db6]{transform-origin:left top;padding:0 0 10px}.control-box[data-v-513c7db6]{min-width:100%}.control-row[data-v-513c7db6]{position:relative;display:flex;align-items:center;height:214px;margin:25px 0}.control-row>.iconfont[data-v-513c7db6]{z-index:2;width:40px;height:50px;margin-right:40px;font-size:30px;text-align:center;color:red;border:1px solid #eee;border-left:none;background:#333;box-sizing:border-box;box-shadow:2px 2px 10px 3px #333;border-radius:3px}.control-row .icon-shidu[data-v-513c7db6]{color:#87ceeb}.control-row .board[data-v-513c7db6]{width:210px;overflow:hidden;position:relative;z-index:2;margin:0 20px;border:3px solid transparent;box-shadow:2px 2px 5px 1px #333;border-radius:5px;background-clip:padding-box;background-clip:padding-box,border-box;background-origin:padding-box,border-box;background-image:linear-gradient(90deg,#fff,#fff),linear-gradient(90deg,#ddd,#999)}.control-row .cha-btn[data-v-513c7db6]{display:none;position:absolute;top:-6px;right:-6px;width:20px;height:20px;border-radius:50%;background:#999;cursor:pointer}.control-row .cha-btn .iconfont[data-v-513c7db6]{position:relative;display:block;left:1px;top:2px;font-size:12px;transform:scale(.6);-moz-transform:scale(.6);-webkit-transform:scale(.6);-o-transform:scale(.6)}.control-row .board:hover .cha-btn[data-v-513c7db6]{display:block}.bg-row[data-v-513c7db6]{z-index:1;position:absolute;top:0;left:0;display:flex;align-items:center;width:100%;height:214px}.bg-row .gray-block[data-v-513c7db6]{width:100%;height:40px;background:#ccc}.delete-btn[data-v-513c7db6]{position:absolute;bottom:25px;right:25px;width:60px;height:60px;line-height:60px;text-align:center}.delete-btn .iconfont[data-v-513c7db6]{font-size:50px;color:#fff}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from \"mitt\";\r\nexport default mitt();\r\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".axis-wrap{width:210px;padding:0 5px 0 0;background:#333}.canvas-box{position:relative;width:220px;height:230px}.icon-float{position:absolute;left:0;top:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.icon-float .iconfont{font-size:45px;color:red}.icon-float .icon-shidu{color:#87ceeb}.tag-box{width:100%;height:52px;display:flex;justify-content:space-around;align-items:center}.tag-box .tag-span{width:80px;text-align:center}.tag-box .ant-input-number-input{text-align:center}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../../../node_modules/less-loader/index.js??ref--11-oneOf-1-4!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=513c7db6&lang=less&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"3ceaeddd\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","export * from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--11-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../../../node_modules/less-loader/index.js??ref--11-oneOf-1-4!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./CoordinateAxis.vue?vue&type=style&index=0&id=0fe5aaef&lang=less&scopede=true\""],"sourceRoot":""}