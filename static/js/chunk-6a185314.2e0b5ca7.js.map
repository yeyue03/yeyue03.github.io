{"version":3,"sources":["webpack:///./src/views/project/charts/control/CoordinateAxis.vue","webpack:///./src/views/project/charts/control/CoordinateAxis.vue?ba9c","webpack:///./src/views/project/charts/control/CoordinateAxis.vue?d7c4","webpack:///./src/views/project/charts/control/CoordinateAxis.vue?782a","webpack:///./src/views/project/charts/control/CoordinateAxis.vue?6bb3"],"names":["class","ref","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","_ctx","formState","index","isShowTimeInput","_createBlock","_component_a_input_number","min","max","step","precision","autofocus","value","duration","$event","onBlur","showTimeInput","onClick","_cache","args","durationConvertStr","style","_normalizeStyle","canvasStyle","_hoisted_4","_hoisted_5","_normalizeClass","icon","_hoisted_6","_hoisted_7","startValue","_createVNode","endValue","onChange","changeValue","defineComponent","name","props","canvasWidth","type","Number","default","canvasHeight","axisObj","Object","emits","setup","emit","toRefs","reactive","computed","hour","Math","floor","minute","canvasRef","ctx","gridSpace","axisSpace","xLineNumber","yLineNumber","nextTick","getContext","width","height","setCanvas","clearRect","beginPath","lineWidth","strokeStyle","i","moveTo","lineTo","stroke","fillStyle","closePath","fill","valueType","changeAxis","__exports__","render","content","__esModule","module","locals","exports","add","___CSS_LOADER_API_IMPORT___","push"],"mappings":"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","file":"static/js/chunk-6a185314.2e0b5ca7.js","sourcesContent":["<template>\r\n  <div class=\"axis-wrap\">\r\n    <div class=\"tag-box\">\r\n      <span class=\"tag-span\">Ramp {{ formState.index }}</span>\r\n      <span v-if=\"!formState.isShowTimeInput\" class=\"tag-span\" @click=\"showTimeInput\">{{ durationConvertStr }}</span>\r\n      <a-input-number v-else class=\"tag-span\" :min=\"1\" :max=\"1440\" :step=\"1\" :precision=\"0\" :autofocus=\"true\" v-model:value=\"formState.duration\" @blur=\"showTimeInput\" />\r\n    </div>\r\n\r\n    <div class=\"canvas-box\" :style=\"canvasStyle\">\r\n      <canvas ref=\"canvasRef\">\r\n        您的浏览器不支持canvas\r\n      </canvas>\r\n\r\n      <div class=\"icon-float\">\r\n        <i :class=\"`iconfont ${formState.icon}`\"></i>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"tag-box\">\r\n      <span class=\"tag-span\">{{ formState.startValue }}</span>\r\n      <a-input-number class=\"tag-span\" :min=\"1\" :max=\"70\" :step=\"1\" :precision=\"0\" v-model:value=\"formState.endValue\" @change=\"changeValue\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, defineComponent, nextTick, reactive, toRefs, computed } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"CoordinateAxis\",\r\n  props: {\r\n    canvasWidth: {\r\n      type: Number,\r\n      default: () => {\r\n        return 205;\r\n      }\r\n    },\r\n    canvasHeight: {\r\n      type: Number,\r\n      default: () => {\r\n        return 110;\r\n      }\r\n    },\r\n    axisObj: {\r\n      type: Object,\r\n      default: () => {\r\n        return {};\r\n      }\r\n    },\r\n  },\r\n  emits: ['changeAxis'],\r\n  setup(props, { emit }) {\r\n    const { canvasWidth, canvasHeight, axisObj } = toRefs(props); // 获取画布的宽、高\r\n\r\n    const formState = reactive({\r\n      ...axisObj.value\r\n    });\r\n\r\n    const durationConvertStr = computed(() => {\r\n      const hour = Math.floor(formState.duration / 60);\r\n      let minute = formState.duration % 60;\r\n      minute = minute < 10 ? '0' + minute : minute;\r\n      return hour + 'h:' + minute + 'm';\r\n    })\r\n\r\n    const canvasRef = ref();\r\n    let ctx = null;\r\n    const gridSpace = 10; // 网格线间隔 px\r\n    const axisSpace = 10; // 坐标轴留白 px\r\n    const xLineNumber = Math.floor(canvasWidth.value / gridSpace) + 1; // 计算需要几条竖线\r\n    const yLineNumber = Math.floor(canvasHeight.value / gridSpace) - 1; // 计算需要几条横线\r\n\r\n    nextTick(() => {\r\n      ctx = canvasRef.value.getContext(\"2d\");\r\n      // ctx.canvas.style.width = canvasWidth.value + 'px';\r\n      // ctx.canvas.style.height = canvasHeight.value + 'px';\r\n      ctx.width = canvasWidth.value;\r\n      ctx.height = canvasHeight.value;\r\n      setCanvas();\r\n    });\r\n\r\n    const setCanvas = () => {\r\n      ctx.clearRect(0, 0, canvasWidth.value, canvasHeight.value);\r\n      \r\n      ctx.beginPath();\r\n      ctx.lineWidth = 1;\r\n      ctx.strokeStyle = \"#777\";\r\n      for (let i = 2; i < xLineNumber; i++) {\r\n        // 循环画竖线 边界不要线，所以i从2开始\r\n        ctx.beginPath();\r\n        ctx.moveTo(i * gridSpace, gridSpace);\r\n        ctx.lineTo(i * gridSpace, canvasHeight.value - axisSpace);\r\n        ctx.stroke();\r\n      }\r\n      for (let i = 2; i < yLineNumber; i++) {\r\n        // 循环画横线\r\n        ctx.beginPath();\r\n        ctx.moveTo(gridSpace, i * gridSpace);\r\n        ctx.lineTo(canvasWidth.value, i * gridSpace);\r\n        ctx.stroke();\r\n      }\r\n\r\n      ctx.strokeStyle = \"#fff\";\r\n      ctx.lineWidth = 2;\r\n      // 绘制X轴\r\n      ctx.beginPath();\r\n      ctx.moveTo(axisSpace, canvasHeight.value - axisSpace);\r\n      ctx.lineTo(canvasWidth.value - axisSpace, canvasHeight.value - axisSpace);\r\n      ctx.stroke();\r\n\r\n      // 绘制Y轴\r\n      ctx.beginPath();\r\n      ctx.moveTo(axisSpace, axisSpace);\r\n      ctx.lineTo(axisSpace, canvasHeight.value - axisSpace);\r\n      ctx.stroke();\r\n\r\n      // 绘制X轴的箭头\r\n      ctx.fillStyle = '#fff'\r\n      ctx.moveTo(canvasWidth.value - axisSpace, canvasHeight.value - axisSpace - 5);\r\n      ctx.lineTo(canvasWidth.value - axisSpace, canvasHeight.value - axisSpace + 5);\r\n      ctx.lineTo(canvasWidth.value - axisSpace + 10, canvasHeight.value - axisSpace);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n\r\n      // 绘制Y轴箭头\r\n      ctx.moveTo(axisSpace - 5, axisSpace);\r\n      ctx.lineTo(axisSpace + 5, axisSpace);\r\n      ctx.lineTo(axisSpace, axisSpace - 10);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n\r\n      // 绘制直线\r\n      ctx.beginPath();\r\n      ctx.moveTo(axisSpace, canvasHeight.value - axisSpace - formState.startValue);\r\n      ctx.lineTo(canvasWidth.value, canvasHeight.value - axisSpace - formState.endValue);\r\n      ctx.strokeStyle = \"#0080FF\";\r\n      ctx.stroke();\r\n    };\r\n\r\n    const changeValue = () => {\r\n      if (formState.valueType == 'constant') {\r\n        formState.startValue = formState.endValue;\r\n      }\r\n      setCanvas();\r\n      changeAxis();\r\n    };\r\n\r\n    // 是否显示时间段输入框\r\n    const showTimeInput = () => {\r\n      formState.isShowTimeInput = !formState.isShowTimeInput;\r\n      changeAxis();\r\n    }\r\n\r\n    const changeAxis = () => {\r\n      emit('changeAxis', formState);\r\n    }\r\n\r\n    return {\r\n      canvasRef,\r\n      formState,\r\n      durationConvertStr,\r\n      canvasStyle: {\r\n        width: canvasWidth.value + 'px',\r\n        height: canvasHeight.value + 'px',\r\n        'border-color': '#f5f5f5'\r\n      },\r\n      changeValue,\r\n      showTimeInput,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"less\" scopede>\r\n.axis-wrap {\r\n  width: 210px;\r\n  padding: 0 5px 0 0;\r\n  background: #333;\r\n}\r\n.canvas-box {\r\n  position: relative;\r\n  width: 220px;\r\n  height: 230px;\r\n}\r\n.icon-float {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  .iconfont {\r\n    font-size: 45px;\r\n    color: red;\r\n  }\r\n  .icon-shidu {\r\n    color: skyblue;\r\n  }\r\n}\r\n.tag-box {\r\n  width: 100%;\r\n  height: 52px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n\r\n  .tag-span {\r\n    width: 80px;\r\n    text-align: center;\r\n  }\r\n  .ant-input-number-input {\r\n    text-align: center;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./CoordinateAxis.vue?vue&type=template&id=0fe5aaef\"\nimport script from \"./CoordinateAxis.vue?vue&type=script&lang=js\"\nexport * from \"./CoordinateAxis.vue?vue&type=script&lang=js\"\n\nimport \"./CoordinateAxis.vue?vue&type=style&index=0&id=0fe5aaef&lang=less&scopede=true\"\n\nimport exportComponent from \"D:\\\\Git\\\\study-package\\\\vue-study\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../../../node_modules/less-loader/index.js??ref--11-oneOf-1-4!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./CoordinateAxis.vue?vue&type=style&index=0&id=0fe5aaef&lang=less&scopede=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"51215d78\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".axis-wrap{width:210px;padding:0 5px 0 0;background:#333}.canvas-box{position:relative;width:220px;height:230px}.icon-float{position:absolute;left:0;top:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.icon-float .iconfont{font-size:45px;color:red}.icon-float .icon-shidu{color:#87ceeb}.tag-box{width:100%;height:52px;display:flex;justify-content:space-around;align-items:center}.tag-box .tag-span{width:80px;text-align:center}.tag-box .ant-input-number-input{text-align:center}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--11-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../../../node_modules/less-loader/index.js??ref--11-oneOf-1-4!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./CoordinateAxis.vue?vue&type=style&index=0&id=0fe5aaef&lang=less&scopede=true\""],"sourceRoot":""}