(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57fbbc02","chunk-6a185314"],{"07e6":function(e,t,a){"use strict";a("daaa")},"26c7":function(e,t,a){"use strict";a.r(t);var o=a("7a23");const n=e=>(Object(o["Q"])("data-v-513c7db6"),e=e(),Object(o["O"])(),e),i={class:"scale-wrap"},c=["onDrop"],r=["onDragstart"],l=["onClick"],s=n(()=>Object(o["n"])("i",{class:"iconfont icon-cha"},null,-1)),d=[s],b=n(()=>Object(o["n"])("div",{class:"bg-row"},[Object(o["n"])("div",{class:"gray-block"})],-1)),u=n(()=>Object(o["n"])("i",{class:"iconfont icon-shanchu"},null,-1)),p=[u];function h(e,t,a,n,s,u){const h=Object(o["W"])("CoordinateAxis");return Object(o["N"])(),Object(o["m"])(o["b"],null,[Object(o["n"])("div",i,[Object(o["n"])("div",{class:"scale-box",style:Object(o["D"])(e.scaleStyle)},[Object(o["n"])("div",{class:"control-box",style:Object(o["D"])("width: "+e.rowWidth)},[(Object(o["N"])(!0),Object(o["m"])(o["b"],null,Object(o["U"])(e.controlObj,(a,n)=>(Object(o["N"])(),Object(o["m"])("div",{key:n,class:"control-row",onDrop:t=>e.rowDropEvent(t,n),onDragover:t[0]||(t[0]=(...t)=>e.dragoverEvent&&e.dragoverEvent(...t))},[Object(o["n"])("i",{class:Object(o["C"])("iconfont "+("temperature"==n?"icon-wendu":"icon-shidu"))},null,2),(Object(o["N"])(!0),Object(o["m"])(o["b"],null,Object(o["U"])(a,(t,a)=>(Object(o["N"])(),Object(o["m"])("div",{key:t.id,class:"board",draggable:"true",onDragstart:t=>e.boardDragStart(t,n,a)},[Object(o["n"])("div",{class:"cha-btn",onClick:t=>e.deleteAxis(n,a)},d,8,l),Object(o["q"])(h,{axisObj:t,onChangeAxis:a=>e.changeAxis(a,t)},null,8,["axisObj","onChangeAxis"])],40,r))),128)),b],40,c))),128))],4)],4)]),Object(o["n"])("div",{class:"delete-btn",onDrop:t[1]||(t[1]=(...t)=>e.deleteDropEvent&&e.deleteDropEvent(...t)),onDragover:t[2]||(t[2]=(...t)=>e.dragoverEvent&&e.dragoverEvent(...t))},p,32)],64)}a("14d9");var v=a("f64c"),g=a("4886"),f=a("927b"),x=Object(o["r"])({name:"ControlRoom",components:{CoordinateAxis:g["default"]},setup(){const e=Object(o["R"])({temperature:[],humidity:[]}),t=(t,a)=>{t.preventDefault();let o=t.dataTransfer.getData("optionItem");if(!o)return;if(o=JSON.parse(o),a!=o.controlType)return v["a"].warning("请选择对应类型按钮");let n=10,i=20;"constant"==o.valueType&&(i=10);let c=e[a].length+1;c=c<10?"0"+c:c,e[a].push({id:Math.random(),icon:o.icon,duration:70,startValue:n,endValue:i,valueType:o.valueType,index:c}),f["a"].emit("changeControlObj",e),s()},a=e=>{e.preventDefault()},n=(e,t,a)=>{e.dataTransfer.setData("boardObj",JSON.stringify({key:t,index:a}))},i=e=>{e.preventDefault();let t=e.dataTransfer.getData("boardObj");t&&(t=JSON.parse(t),c(t.key,t.index))},c=(t,a)=>{e[t].splice(a,1),f["a"].emit("changeControlObj",e),s()},r=(t,a)=>{Object.assign(a,t),f["a"].emit("changeControlObj",e)},l=Object(o["S"])("500px"),s=()=>{let t=e["temperature"].length;t<e["humidity"].length&&(t=e["humidity"].length),l.value=80+250*t+300+"px"},d=Object(o["R"])({width:100,height:100,scale:1}),b=Object(o["i"])(()=>({width:d.width+"%",height:d.height+"%",transform:`scale(${d.scale})`}));return f["a"].on("scaleOption",e=>{"amplify"==e?(d.width*=.8,d.height*=.8,d.scale*=1.25):"reduce"==e?(d.width=d.width>=100?100:1.25*d.width,d.height=d.height>=100?100:1.25*d.height,d.scale*=.8):"restore"==e&&(d.width=100,d.height=100,d.scale=1)}),{rowWidth:l,controlObj:e,scaleStyle:b,rowDropEvent:t,boardDragStart:n,deleteDropEvent:i,dragoverEvent:a,deleteAxis:c,changeAxis:r}}}),O=(a("07e6"),a("d959")),m=a.n(O);const j=m()(x,[["render",h],["__scopeId","data-v-513c7db6"]]);t["default"]=j},4886:function(e,t,a){"use strict";a.r(t);var o=a("7a23");const n={class:"axis-wrap"},i={class:"tag-box"},c={class:"tag-span"},r={ref:"canvasRef"},l={class:"icon-float"},s={class:"tag-box"},d={class:"tag-span"};function b(e,t,a,b,u,p){const h=Object(o["W"])("a-input-number");return Object(o["N"])(),Object(o["m"])("div",n,[Object(o["n"])("div",i,[Object(o["n"])("span",c,"Ramp "+Object(o["Z"])(e.formState.index),1),e.formState.isShowTimeInput?(Object(o["N"])(),Object(o["k"])(h,{key:1,class:"tag-span",min:1,max:1440,step:1,precision:0,autofocus:!0,value:e.formState.duration,"onUpdate:value":t[1]||(t[1]=t=>e.formState.duration=t),onBlur:e.showTimeInput},null,8,["value","onBlur"])):(Object(o["N"])(),Object(o["m"])("span",{key:0,class:"tag-span",onClick:t[0]||(t[0]=(...t)=>e.showTimeInput&&e.showTimeInput(...t))},Object(o["Z"])(e.durationConvertStr),1))]),Object(o["n"])("div",{class:"canvas-box",style:Object(o["D"])(e.canvasStyle)},[Object(o["n"])("canvas",r," 您的浏览器不支持canvas ",512),Object(o["n"])("div",l,[Object(o["n"])("i",{class:Object(o["C"])("iconfont "+e.formState.icon)},null,2)])],4),Object(o["n"])("div",s,[Object(o["n"])("span",d,Object(o["Z"])(e.formState.startValue),1),Object(o["q"])(h,{class:"tag-span",min:1,max:70,step:1,precision:0,value:e.formState.endValue,"onUpdate:value":t[2]||(t[2]=t=>e.formState.endValue=t),onChange:e.changeValue},null,8,["value","onChange"])])])}var u=Object(o["r"])({name:"CoordinateAxis",props:{canvasWidth:{type:Number,default:()=>205},canvasHeight:{type:Number,default:()=>110},axisObj:{type:Object,default:()=>({})}},emits:["changeAxis"],setup(e,{emit:t}){const{canvasWidth:a,canvasHeight:n,axisObj:i}=Object(o["cb"])(e),c=Object(o["R"])({...i.value}),r=Object(o["i"])(()=>{const e=Math.floor(c.duration/60);let t=c.duration%60;return t=t<10?"0"+t:t,e+"h:"+t+"m"}),l=Object(o["S"])();let s=null;const d=10,b=10,u=Math.floor(a.value/d)+1,p=Math.floor(n.value/d)-1;Object(o["B"])(()=>{s=l.value.getContext("2d"),s.width=a.value,s.height=n.value,h()});const h=()=>{s.clearRect(0,0,a.value,n.value),s.beginPath(),s.lineWidth=1,s.strokeStyle="#777";for(let e=2;e<u;e++)s.beginPath(),s.moveTo(e*d,d),s.lineTo(e*d,n.value-b),s.stroke();for(let e=2;e<p;e++)s.beginPath(),s.moveTo(d,e*d),s.lineTo(a.value,e*d),s.stroke();s.strokeStyle="#fff",s.lineWidth=2,s.beginPath(),s.moveTo(b,n.value-b),s.lineTo(a.value-b,n.value-b),s.stroke(),s.beginPath(),s.moveTo(b,b),s.lineTo(b,n.value-b),s.stroke(),s.fillStyle="#fff",s.moveTo(a.value-b,n.value-b-5),s.lineTo(a.value-b,n.value-b+5),s.lineTo(a.value-b+10,n.value-b),s.closePath(),s.fill(),s.moveTo(b-5,b),s.lineTo(b+5,b),s.lineTo(b,b-10),s.closePath(),s.fill(),s.beginPath(),s.moveTo(b,n.value-b-c.startValue),s.lineTo(a.value,n.value-b-c.endValue),s.strokeStyle="#0080FF",s.stroke()},v=()=>{"constant"==c.valueType&&(c.startValue=c.endValue),h(),f()},g=()=>{c.isShowTimeInput=!c.isShowTimeInput,f()},f=()=>{t("changeAxis",c)};return{canvasRef:l,formState:c,durationConvertStr:r,canvasStyle:{width:a.value+"px",height:n.value+"px","border-color":"#f5f5f5"},changeValue:v,showTimeInput:g}}}),p=(a("f05e"),a("d959")),h=a.n(p);const v=h()(u,[["render",b]]);t["default"]=v},7321:function(e,t,a){var o=a("98c0");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var n=a("499e").default;n("51215d78",o,!0,{sourceMap:!1,shadowMode:!1})},8424:function(e,t,a){var o=a("4bad");t=o(!1),t.push([e.i,".scale-wrap[data-v-513c7db6]{width:100%;padding:90px 0 50px}.scale-box[data-v-513c7db6]{transform-origin:left top;padding:0 0 10px}.control-box[data-v-513c7db6]{min-width:100%}.control-row[data-v-513c7db6]{position:relative;display:flex;align-items:center;height:214px;margin:25px 0}.control-row>.iconfont[data-v-513c7db6]{z-index:2;width:40px;height:50px;margin-right:40px;font-size:30px;text-align:center;color:red;border:1px solid #eee;border-left:none;background:#333;box-sizing:border-box;box-shadow:2px 2px 10px 3px #333;border-radius:3px}.control-row .icon-shidu[data-v-513c7db6]{color:#87ceeb}.control-row .board[data-v-513c7db6]{width:210px;overflow:hidden;position:relative;z-index:2;margin:0 20px;border:3px solid transparent;box-shadow:2px 2px 5px 1px #333;border-radius:5px;background-clip:padding-box;background-clip:padding-box,border-box;background-origin:padding-box,border-box;background-image:linear-gradient(90deg,#fff,#fff),linear-gradient(90deg,#ddd,#999)}.control-row .cha-btn[data-v-513c7db6]{display:none;position:absolute;top:-6px;right:-6px;width:20px;height:20px;border-radius:50%;background:#999;cursor:pointer}.control-row .cha-btn .iconfont[data-v-513c7db6]{position:relative;display:block;left:1px;top:2px;font-size:12px;transform:scale(.6);-moz-transform:scale(.6);-webkit-transform:scale(.6);-o-transform:scale(.6)}.control-row .board:hover .cha-btn[data-v-513c7db6]{display:block}.bg-row[data-v-513c7db6]{z-index:1;position:absolute;top:0;left:0;display:flex;align-items:center;width:100%;height:214px}.bg-row .gray-block[data-v-513c7db6]{width:100%;height:40px;background:#ccc}.delete-btn[data-v-513c7db6]{position:absolute;bottom:25px;right:25px;width:60px;height:60px;line-height:60px;text-align:center}.delete-btn .iconfont[data-v-513c7db6]{font-size:50px;color:#fff}",""]),e.exports=t},"927b":function(e,t,a){"use strict";var o=function(e){return{all:e=e||new Map,on:function(t,a){var o=e.get(t);o?o.push(a):e.set(t,[a])},off:function(t,a){var o=e.get(t);o&&(a?o.splice(o.indexOf(a)>>>0,1):e.set(t,[]))},emit:function(t,a){var o=e.get(t);o&&o.slice().map((function(e){e(a)})),(o=e.get("*"))&&o.slice().map((function(e){e(t,a)}))}}};t["a"]=o()},"98c0":function(e,t,a){var o=a("4bad");t=o(!1),t.push([e.i,".axis-wrap{width:210px;padding:0 5px 0 0;background:#333}.canvas-box{position:relative;width:220px;height:230px}.icon-float{position:absolute;left:0;top:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.icon-float .iconfont{font-size:45px;color:red}.icon-float .icon-shidu{color:#87ceeb}.tag-box{width:100%;height:52px;display:flex;justify-content:space-around;align-items:center}.tag-box .tag-span{width:80px;text-align:center}.tag-box .ant-input-number-input{text-align:center}",""]),e.exports=t},daaa:function(e,t,a){var o=a("8424");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var n=a("499e").default;n("3ceaeddd",o,!0,{sourceMap:!1,shadowMode:!1})},f05e:function(e,t,a){"use strict";a("7321")}}]);
//# sourceMappingURL=chunk-57fbbc02.a98f5f48.js.map